import{r as l,i as D,R as e,C as I}from"./index-CVXZKmLB.js";import{a as b,b as y}from"./CContainer-CUBQWJe-.js";import{C as u,a as r}from"./CRow-DsyirR-w.js";import{C as T}from"./CAlert-2eDP0SyD.js";import{C as P,a as v}from"./CCardBody-Dgfl31BA.js";import{C as V}from"./CCardHeader-kl5Q3YQb.js";import{C as _}from"./CNav-D1N1g9Dm.js";import{l as $,m as U}from"./CNavItem-Di_elR9g.js";import{C as B,a as M}from"./CTabPane-L2Cw2IRi.js";import"./CCloseButton-Ep9ySGeW.js";const Q="https://backend-log2.axleshift.com/api/v1/product";function j(){const[o,m]=l.useState([]),[E,i]=l.useState([]),[s,g]=l.useState(""),[d,w]=l.useState("All"),[n,S]=l.useState([0,1e3]),[f,x]=l.useState([]),[k,A]=l.useState(!0),[N,L]=l.useState(null),h=D();l.useEffect(()=>{async function t(){try{const a=await fetch(Q);if(!a.ok)throw new Error("Failed to fetch products");const c=await a.json();console.log("Fetched products:",c),m(c),i(c);const C=Array.from(new Set(c.map(p=>p.category).filter(Boolean)));x(["All",...C])}catch(a){L(a.message)}finally{A(!1)}}t()},[]),l.useEffect(()=>{let t=o.filter(a=>{const c=d==="All"||a.category===d,C=a.price>=n[0]&&a.price<=n[1],p=a.itemName&&a.itemName.toLowerCase().includes(s.toLowerCase())||a.description&&a.description.toLowerCase().includes(s.toLowerCase());return c&&C&&p});console.log("Filtered products:",t),i(t)},[s,d,n,o]);const R=t=>{h(`/procurement/product/${t}`)},F=()=>{h("/procurement/product/new")};return e.createElement(b,{className:"py-4"},e.createElement(u,{className:"align-items-center mb-4"},e.createElement(r,{md:8},e.createElement("h2",{className:"fw-bold"},"Product Catalog")),e.createElement(r,{md:4,className:"text-end"},e.createElement(y,{color:"success",onClick:F},"+ Add Product"))),e.createElement(u,{className:"mb-4"},e.createElement(r,{md:4},e.createElement("input",{type:"text",placeholder:"Search by name or description",value:s,onChange:t=>g(t.target.value),className:"form-control"})),e.createElement(r,{md:4},e.createElement("select",{value:d,onChange:t=>w(t.target.value),className:"form-control"},f.length>0?f.map(t=>e.createElement("option",{key:t,value:t},t)):e.createElement("option",null,"Loading Categories..."))),e.createElement(r,{md:4},e.createElement("label",null,"Price Range: $",n[0]," - $",n[1]),e.createElement("input",{type:"range",min:"0",max:"1000",value:n[1],onChange:t=>S([0,parseInt(t.target.value)]),className:"form-range"}))),N&&e.createElement(T,{color:"danger"},N),k?e.createElement("div",{className:"text-center"},e.createElement(I,{color:"primary",size:"sm"}),e.createElement("p",{className:"mt-2"},"Loading products...")):e.createElement(u,{className:"g-4"},E.length===0?e.createElement("p",{className:"text-center"},"No products found."):E.map(t=>{var a;return e.createElement(r,{key:t._id,md:4},e.createElement(P,{className:"shadow-sm"},t.images&&t.images.length>0&&e.createElement("img",{src:t.images[0],alt:t.itemName,className:"card-img-top",style:{height:"200px",objectFit:"cover"}}),e.createElement(V,{className:"fw-bold"},t.itemName),e.createElement(v,null,e.createElement("p",{className:"text-muted"},t.description||"No description available."),e.createElement("p",{className:"small"},e.createElement("strong",null,"Category:")," ",t.category||"Uncategorized"),e.createElement("p",{className:"small"},e.createElement("strong",null,"Price:")," $",t.price?Number(t.price).toFixed(2):"0.00"),e.createElement("p",{className:"small"},e.createElement("strong",null,"Stock:")," ",t.stockQuantity??"N/A"),e.createElement("p",{className:"small"},e.createElement("strong",null,"Vendor:")," ",((a=t.created_by)==null?void 0:a.fullName)||"Unknown"),e.createElement(y,{color:"primary",className:"mt-2",onClick:()=>R(t._id)},"View Details"))))})))}function Z(){const[o,m]=l.useState(1),[E,i]=l.useState(null),s=g=>{i(g),m(2)};return e.createElement(b,{className:"py-4"},e.createElement(u,null,e.createElement(r,null,e.createElement(P,{className:"shadow-sm"},e.createElement(v,null,e.createElement("h1",{className:"text-2xl fw-bold pb-3"},"Product Page"),e.createElement(_,{variant:"tabs",role:"tablist"},e.createElement($,null,e.createElement(U,{active:o===1,onClick:()=>m(1)},"Product Catalog"))),e.createElement(B,null,e.createElement(M,{role:"tabpanel",visible:o===1},e.createElement(j,{onViewDetails:s}))))))))}export{Z as default};
