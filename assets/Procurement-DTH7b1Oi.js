import{P as a,u as T,l as y,r as n,R as e}from"./index-u2Qs36p3.js";import{a as S}from"./index-xsH4HHeE.js";import{c as l,a as A,b as p}from"./CRow-DtWFmLOc.js";import{a as x}from"./CFormInput-BombTHvf.js";import{C as d}from"./CFormSelect-CCrtQkoU.js";import{C as F,a as k}from"./CCardBody-yjhI4cU3.js";import{g as q,h as w,j as E,k as s,l as B,m as o}from"./CTable-Bj2GUyx5.js";import{C as D,a as N,b as L,c as _,d as $}from"./DefaultLayout-BGq73zaZ.js";import"./CCloseButton-_40XTppL.js";import"./CFormTextarea-BaXxN6bT.js";import"./CForm-BtwIIebc.js";import"./CCardHeader-lU4oNxDI.js";import"./CAlert-BUqSYFh_.js";import"./index.esm-CMPwQNLq.js";import"./cil-user-Ddrdy7PS.js";import"./index-BSMPKgt7.js";a.string.isRequired,a.oneOf(["text","number","date","textarea","select"]),a.string.isRequired,a.oneOfType([a.string,a.number]).isRequired,a.func.isRequired,a.string,a.bool,a.arrayOf(a.string),a.number,a.bool;const H="https://backend-log2.axleshift.com",I=`${H}/api/v1/procurement`,O=()=>{const{accessToken:m,user:z}=T(),c=y(),[U,j]=n.useState({title:"",description:"",procurementDate:"",status:"Pending",deliveryDate:"",department:"",products:[{name:"",quantity:0,unit:"",unitPrice:0}],estimatedCost:0}),[C,V]=n.useState([]),[M,Q]=n.useState(!1),[G,g]=n.useState(!1),[f,v]=n.useState([]),[r,b]=n.useState({title:"",department:"",status:""}),P=async()=>{if(m)try{const t=new URLSearchParams;r.title&&t.append("title",r.title),r.department&&t.append("department",r.department),r.status&&t.append("status",r.status);const u=await S.get(`${I}?${t.toString()}`,{headers:{Authorization:`Bearer ${m}`}});v(u.data)}catch(t){console.error("Error fetching procurements:",t)}};n.useEffect(()=>{P()},[m,r]);const i=t=>{const{name:u,value:h}=t.target;b(R=>({...R,[u]:h}))};return e.createElement(e.Fragment,null,e.createElement(l,{color:"primary",onClick:()=>g(!0),className:"mb-3"},"+ Create Procurement"),e.createElement(A,{className:"mb-3"},e.createElement(p,{md:3},e.createElement(x,{placeholder:"Filter by Title",name:"title",value:r.title,onChange:i})),e.createElement(p,{md:3},e.createElement(d,{name:"department",value:r.department,onChange:i},e.createElement("option",{value:""},"All Departments"),e.createElement("option",{value:"HR"},"HR"),e.createElement("option",{value:"Finance"},"Finance"),e.createElement("option",{value:"Logistics"},"Logistics"),e.createElement("option",{value:"IT"},"IT"),e.createElement("option",{value:"Procurement"},"Procurement"))),e.createElement(p,{md:3},e.createElement(d,{name:"status",value:r.status,onChange:i},e.createElement("option",{value:""},"All Statuses"),e.createElement("option",{value:"Pending"},"Pending"),e.createElement("option",{value:"Approved"},"Approved"),e.createElement("option",{value:"Rejected"},"Rejected")))),e.createElement(F,null,e.createElement(k,null,e.createElement("h5",null,"Procurement Requests"),e.createElement(q,{responsive:!0},e.createElement(w,null,e.createElement(E,null,e.createElement(s,null,"Title"),e.createElement(s,null,"Department"),e.createElement(s,null,"Status"),e.createElement(s,null,"Actions"))),e.createElement(B,null,f.map(t=>e.createElement(E,{key:t._id},e.createElement(o,null,t.title),e.createElement(o,null,t.department),e.createElement(o,null,e.createElement(D,{color:t.status==="Approved"?"success":"warning"},t.status)),e.createElement(o,{className:"text-center"},e.createElement(l,{color:"info",size:"sm",onClick:()=>c(`/procurement/${t._id}`)},"View"),t.status==="Approved"&&e.createElement(e.Fragment,null,e.createElement(l,{color:"primary",size:"sm",onClick:()=>c(`/rfq/create/${t._id}`)},"Create RFQ"),e.createElement(l,{color:"success",size:"sm",onClick:()=>c("/procurement/po-payments")},"Create PO"))))))))),e.createElement(N,{placement:"top-end"},C.map(t=>e.createElement(L,{key:t.id,autohide:!0,visible:!0,color:t.color},e.createElement(_,{closeButton:!0},t.color==="success"?"âœ… Success":"ðŸš¨ Error"),e.createElement($,null,t.message)))))},ie=()=>e.createElement("div",{className:"p-6"},e.createElement("h1",{className:"text-2xl font-bold mb-4 text-center"},"ðŸ›’ Procurement Request"),e.createElement(O,null));export{ie as default};
