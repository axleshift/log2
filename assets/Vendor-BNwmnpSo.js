import{k as y,r as a,R as e,C as S}from"./index-BymYdVf9.js";import{C as T,a as N}from"./CRow-DBpbnMc3.js";import{C as w,a as v}from"./CCardBody-DKAj1_EX.js";import{C as x,a as M,b as m,c as s,d as R,e as n}from"./CTable-BSOgMIVc.js";import{b as E}from"./CContainer-BW6RyZoO.js";import{C as U,a as k,b as V,c as A}from"./CModalHeader-CSRrgwEo.js";import{C as D}from"./CModalTitle-BKqgmdPf.js";import"./CCloseButton-CoMusDxn.js";import"./CNavItem-BBtPj2Ni.js";const B="https://backend-log2.axleshift.com/api/v1/auth",K=()=>{const{accessToken:c}=y(),[i,u]=a.useState([]),[d,C]=a.useState(!0),[f,o]=a.useState(!1),[l,p]=a.useState(null),[_,H]=a.useState(null);a.useEffect(()=>{if(!c)return;(async()=>{try{const r=await fetch(`${B}/users`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`}});if(!r.ok)throw new Error(`HTTP error! Status: ${r.status}`);const h=(await r.json()).users.filter(b=>b.role==="vendor");u(h)}catch(r){console.error("Error fetching users:",r),u([])}finally{C(!1)}})()},[c]);const g=t=>{p(t),o(!0)};return e.createElement(e.Fragment,null,e.createElement(T,null,e.createElement(N,{xs:"12"},e.createElement(w,{className:"shadow-lg"},e.createElement(v,null,e.createElement("h4",{className:"text-primary"},"Vendor Management"),d?e.createElement("div",{className:"d-flex justify-content-center"},e.createElement(S,{color:"primary"})):e.createElement(x,{striped:!0,bordered:!0,hover:!0,responsive:!0},e.createElement(M,{className:"bg-light"},e.createElement(m,null,e.createElement(s,null,"User ID"),e.createElement(s,null,"Email"),e.createElement(s,null,"Status"),e.createElement(s,null,"Role"),e.createElement(s,null,"Actions"))),e.createElement(R,null,i.length>0?i.map(t=>e.createElement(m,{key:t._id,className:"text-center"},e.createElement(n,null,t._id),e.createElement(n,null,t.email),e.createElement(n,null,t.status),e.createElement(n,null,t.role),e.createElement(n,null,e.createElement(E,{color:"info",onClick:()=>g(t),className:"mr-2"},"View Details")))):e.createElement(m,null,e.createElement(n,{colSpan:"5",className:"text-center"},"No vendors found.")))))))),e.createElement(U,{visible:f,onClose:()=>o(!1),className:"bg-light"},e.createElement(k,{onClose:()=>o(!1)},e.createElement(D,null,"User Details")),e.createElement(V,null,l&&e.createElement("div",null,e.createElement("p",null,e.createElement("strong",null,"User ID:")," ",l._id),e.createElement("p",null,e.createElement("strong",null,"Name:")," ",(l==null?void 0:l.name)||"N/A"),e.createElement("p",null,e.createElement("strong",null,"Email:")," ",l.email),e.createElement("p",null,e.createElement("strong",null,"Status:")," ",l.status),e.createElement("p",null,e.createElement("strong",null,"Role:")," ",l.role))),e.createElement(A,null,e.createElement(E,{color:"secondary",onClick:()=>o(!1)},"Close"))))};export{K as default};
