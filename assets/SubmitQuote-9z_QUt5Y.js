import{y as T,k as w,r as n,z as F,R as e,C as Q}from"./index-BymYdVf9.js";import{a as h}from"./index-C88pvD_q.js";import{C as x,a as A}from"./CCardBody-DKAj1_EX.js";import{C as N}from"./CCardHeader-C8qsqDXX.js";import{C as g}from"./CAlert-BMldUZU9.js";import{C as v,a as S,b as u,c as r,d as $,e as l}from"./CTable-BSOgMIVc.js";import{C as k}from"./DefaultLayout-CguGU2D0.js";import{b as y}from"./CContainer-BW6RyZoO.js";import"./CCloseButton-CoMusDxn.js";import"./index.esm-Cw0dBaxO.js";import"./CNavItem-BBtPj2Ni.js";import"./cil-user-Ddrdy7PS.js";import"./index-CiGjFrqD.js";const M=()=>{const{id:o}=T(),{accessToken:s}=w(),[c,d]=n.useState(null),[b,E]=n.useState(!0),[p,R]=n.useState(null),{showToast:C}=F();n.useEffect(()=>{s&&(async()=>{E(!0);try{const a=await h.get(`https://backend-log2.axleshift.com/api/v1/rfq/${o}`,{headers:{Authorization:`Bearer ${s}`}});d(a.data)}catch{R("Failed to load RFQ details.")}finally{E(!1)}})()},[o,s]);const f=async(t,a)=>{try{await h.patch(`https://backend-log2.axleshift.com/api/v1/rfq/${o}/quotes/${t}`,{status:a},{headers:{Authorization:`Bearer ${s}`}}),d(m=>({...m,quotes:m.quotes.map(i=>i._id===t?{...i,status:a}:i)})),C(`Quote ${a.toLowerCase()} successfully!`,"success")}catch{C("Failed to update quote status.","error")}};return e.createElement(x,{className:"shadow-sm"},e.createElement(N,{className:"bg-primary text-white fw-bold"},"RFQ Details"),e.createElement(A,null,b?e.createElement("div",{className:"text-center my-3"},e.createElement(Q,{color:"primary"})):p?e.createElement(g,{color:"danger",className:"text-center"},p):c?e.createElement(e.Fragment,null,e.createElement("h6",null,e.createElement("strong",null,"Submitted Quotes")),e.createElement(v,{hover:!0,responsive:!0,className:"text-center"},e.createElement(S,null,e.createElement(u,null,e.createElement(r,null,"Total Price"),e.createElement(r,null,"Quantity"),e.createElement(r,null,"Lead Time"),e.createElement(r,null,"Terms"),e.createElement(r,null,"Valid Until"),e.createElement(r,null,"Status"),e.createElement(r,null,"Action"))),e.createElement($,null,c.quotes.length>0?c.quotes.map((t,a)=>e.createElement(u,{key:a},e.createElement(l,null,t.totalPrice),e.createElement(l,null,t.quantity),e.createElement(l,null,t.leadTime),e.createElement(l,null,t.terms||"N/A"),e.createElement(l,null,t.validUntil?new Date(t.validUntil).toLocaleDateString():"N/A"),e.createElement(l,null,e.createElement(k,{color:t.status==="Approved"?"success":t.status==="Rejected"?"danger":"warning"},t.status)),e.createElement(l,null,t.status==="Pending"&&e.createElement(e.Fragment,null,e.createElement(y,{color:"success",size:"sm",className:"me-2",onClick:()=>f(t._id,"Approved")},"Approve"),e.createElement(y,{color:"danger",size:"sm",onClick:()=>f(t._id,"Rejected")},"Reject"))))):e.createElement(u,null,e.createElement(l,{colSpan:"7"},"No quotes submitted yet."))))):e.createElement(g,{color:"warning",className:"text-center"},"RFQ not found.")))};export{M as default};
