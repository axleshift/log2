import{r as c,R as e,C as T}from"./index-D8dcmZku.js";import{a as p}from"./index-xsH4HHeE.js";import{C as _,a as k}from"./CCardBody-BXDHfi6T.js";import{C as x}from"./CCardHeader-CmBIry2J.js";import{g as P,h as M,j as d,k as r,l as v,m as n,c as D,d as F,n as L,e as $,f as B}from"./CTable-BEFPcFQk.js";import{c as o}from"./CRow-CaSEyrQu.js";import"./CCloseButton-CIVrGVIc.js";const f="https://backend-log2.axleshift.com";function G(){const[C,m]=c.useState([]),[y,g]=c.useState(!0),[h,u]=c.useState(!1),[a,A]=c.useState(null),[b,i]=c.useState(null);c.useEffect(()=>{(async()=>{g(!0);try{const l=await p.get(`${f}/api/v1/vendors`);m(l.data||[])}catch(l){console.error("Error fetching vendors:",l),m([])}finally{g(!1)}})()},[]);const V=async t=>{i(t);try{const l=await p.put(`${f}/api/v1/vendors/approve/${t}`);l.status===200?m(E=>E.map(s=>s._id===t?{...s,status:"Approved"}:s)):console.error("Error approving vendor:",l.statusText)}catch(l){console.error("Error approving vendor:",l)}finally{i(null)}},w=async t=>{i(t);try{const l=await p.put(`${f}/api/v1/vendors/cancel-approval/${t}`);l.status===200?m(E=>E.map(s=>s._id===t?{...s,status:"Pending"}:s)):console.error("Error canceling approval:",l.statusText)}catch(l){console.error("Error canceling approval:",l)}finally{i(null)}},N=t=>{A(t),u(!0)},S=t=>{switch(t){case"Approved":return"success";case"Pending":return"warning";default:return"secondary"}};return e.createElement(e.Fragment,null,e.createElement(_,null,e.createElement(x,null,"Vendor Profiles"),e.createElement(k,null,y?e.createElement("div",{className:"d-flex justify-content-center"},e.createElement(T,{color:"primary"})):e.createElement(P,{striped:!0,responsive:!0},e.createElement(M,null,e.createElement(d,null,e.createElement(r,null,"Company"),e.createElement(r,null,"Full Name"),e.createElement(r,null,"Email"),e.createElement(r,null,"Phone"),e.createElement(r,null,"Address"),e.createElement(r,null,"Website"),e.createElement(r,null,"Status"),e.createElement(r,null,"Actions"))),e.createElement(v,null,C.length>0?C.map(t=>e.createElement(d,{key:t._id},e.createElement(n,null,t.businessName),e.createElement(n,null,t.fullName),e.createElement(n,null,t.email),e.createElement(n,null,t.contactNumber),e.createElement(n,null,t.businessAddress),e.createElement(n,null,t.website),e.createElement(n,null,e.createElement(o,{color:S(t.status)},t.status)),e.createElement(n,null,e.createElement(o,{size:"sm",color:"info",onClick:()=>N(t)},"View Details"),t.status==="Approved"?e.createElement(o,{size:"sm",color:"warning",onClick:()=>w(t._id),disabled:b===t._id},"Cancel Approval"):e.createElement(o,{size:"sm",color:"success",onClick:()=>V(t._id),disabled:b===t._id},"Approve")))):e.createElement(d,null,e.createElement(n,{colSpan:"8",className:"text-center"},"No vendors found.")))))),e.createElement(D,{visible:h,onClose:()=>u(!1)},e.createElement(F,{onClose:()=>u(!1)},e.createElement(L,null,"Vendor Details")),e.createElement($,null,a&&e.createElement(e.Fragment,null,e.createElement("p",null,e.createElement("strong",null,"Company:")," ",a.businessName),e.createElement("p",null,e.createElement("strong",null,"Full Name:")," ",a.fullName),e.createElement("p",null,e.createElement("strong",null,"Email:")," ",a.email),e.createElement("p",null,e.createElement("strong",null,"Phone:")," ",a.contactNumber),e.createElement("p",null,e.createElement("strong",null,"Address:")," ",a.businessAddress),e.createElement("p",null,e.createElement("strong",null,"Website:")," ",a.website),e.createElement("p",null,e.createElement("strong",null,"Status:")," ",a.status),e.createElement("p",null,e.createElement("strong",null,"Documents:")," ",e.createElement("a",{href:a.documents.companyProfile,target:"_blank",rel:"noopener noreferrer"},"View Profile")))),e.createElement(B,null,e.createElement(o,{color:"secondary",onClick:()=>u(!1)},"Close"))))}export{G as default};
