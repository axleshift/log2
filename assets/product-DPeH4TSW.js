import{r,i as $,R as e,C as F}from"./index-DQP8N3_v.js";import{a as b,b as P}from"./CContainer-B5X986nK.js";import{C as g,a as c}from"./CRow-DRxYPhhI.js";import{C as I}from"./CAlert-k6EoeMSe.js";import{C as v,a as w}from"./CCardBody-DhxhUCKr.js";import{C as M}from"./CCardHeader-aqV2zWI-.js";import{C as V,a as _,b as B}from"./CTabPane-D3AShznO.js";import{e as Q,f as U}from"./CNavItem-BP7P-adU.js";import"./CCloseButton-B0Lgjfr_.js";const j="https://backend-log2.axleshift.com/api/v1/product";function q(){const[o,i]=r.useState([]),[C,u]=r.useState([]),[n,p]=r.useState(""),[d,S]=r.useState("All"),[s,h]=r.useState([0,2e4]),[x,k]=r.useState([]),[A,R]=r.useState(!0),[N,L]=r.useState(null),y=$();r.useEffect(()=>{async function t(){try{const a=await fetch(j);if(!a.ok)throw new Error("Failed to fetch products");const l=await a.json();i(l),u(l);const f=["All",...new Set(l.map(m=>m.category).filter(Boolean))];k(f);const E=Math.max(...l.map(m=>m.price),2e4);h([0,E])}catch(a){L(a.message)}finally{R(!1)}}t()},[]),r.useEffect(()=>{const t=o.filter(a=>{const l=d==="All"||a.category===d,f=a.price>=s[0]&&a.price<=s[1],E=n.toLowerCase(),m=n===""||a.itemName.toLowerCase().includes(E)||a.description.toLowerCase().includes(E);return l&&f&&m});u(t)},[n,d,s,o]);const T=t=>y(`/procurement/product/${t}`),D=()=>y("/procurement/product/new");return e.createElement(b,{className:"py-4"},e.createElement(g,{className:"align-items-center mb-4"},e.createElement(c,{md:8},e.createElement("h2",{className:"fw-bold"},"Product Catalog")),e.createElement(c,{md:4,className:"text-end"},e.createElement(P,{color:"success",onClick:D},"+ Add Product"))),e.createElement(g,{className:"mb-4"},e.createElement(c,{md:4},e.createElement("input",{type:"text",placeholder:"Search...",value:n,onChange:t=>p(t.target.value),className:"form-control"})),e.createElement(c,{md:4},e.createElement("select",{value:d,onChange:t=>S(t.target.value),className:"form-control"},x.map(t=>e.createElement("option",{key:t,value:t},t)))),e.createElement(c,{md:4},e.createElement("label",null,"Price Range: $",s[0]," - $",s[1]),e.createElement("input",{type:"range",min:"0",max:"10000",value:s[1],onChange:t=>h([0,Number(t.target.value)]),className:"form-range"}))),N&&e.createElement(I,{color:"danger"},N),A?e.createElement("div",{className:"text-center"},e.createElement(F,{color:"primary"}),e.createElement("p",null,"Loading products...")):e.createElement(g,{className:"g-4"},C.length===0?e.createElement("p",{className:"text-center"},"No products found."):C.map(t=>{var a,l;return e.createElement(c,{key:t._id,md:4},e.createElement(v,{className:"shadow-sm"},((a=t.images)==null?void 0:a.length)>0&&e.createElement("img",{src:t.images[0],alt:t.itemName,className:"card-img-top",style:{height:"180px",objectFit:"cover"}}),e.createElement(M,{className:"fw-bold"},t.itemName),e.createElement(w,null,e.createElement("p",{className:"text-muted"},(l=t.description)==null?void 0:l.slice(0,60),"..."),e.createElement("p",null,e.createElement("strong",null,"Category:")," ",t.category||"Uncategorized"),e.createElement("p",null,e.createElement("strong",null,"Price:")," $",t.price?Number(t.price).toFixed(2):"0.00"),e.createElement("p",null,e.createElement("strong",null,"Stock:")," ",t.stockQuantity??"N/A"),e.createElement(P,{color:"primary",onClick:()=>T(t._id)},"View Details"))))})))}function Z(){const[o,i]=r.useState(1),[C,u]=r.useState(null),n=p=>{u(p),i(2)};return e.createElement(b,{className:"py-4"},e.createElement(g,null,e.createElement(c,null,e.createElement(v,{className:"shadow-sm"},e.createElement(w,null,e.createElement("h1",{className:"text-2xl fw-bold pb-3"},"Product Page"),e.createElement(V,{variant:"tabs",role:"tablist"},e.createElement(Q,null,e.createElement(U,{active:o===1,onClick:()=>i(1)},"Product Catalog"))),e.createElement(_,null,e.createElement(B,{role:"tabpanel",visible:o===1},e.createElement(q,{onViewDetails:n}))))))))}export{Z as default};
