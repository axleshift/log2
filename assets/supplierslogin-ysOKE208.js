import{f as A,r as s,j as e,L as d,g as j}from"./index-B51JksBE.js";import{u as O,c as _}from"./index.esm-381URJXw.js";import{C as y}from"./index.esm-DrdwJ6U8.js";import{F,d as G,e as U}from"./index-DFOcuWJf.js";import{R as q,V}from"./config-DE7ZZj5g.js";import{C as D,a as o}from"./CContainer-am4RXidK.js";import{C as p,a as r}from"./CRow-DzY6Ej5F.js";import{C as W}from"./CCardGroup-DXkvqLol.js";import{C as B,a as $}from"./CCardBody-mcuKBU4L.js";import{C as z}from"./CAlert-8IDJ_jNb.js";import{C as H}from"./CForm-DV9VWcIO.js";import{C,a as S}from"./CInputGroupText-DLFCZmpL.js";import{c as J}from"./cil-user-Ddrdy7PS.js";import{C as w}from"./CFormInput-DYHQpWno.js";import"./CCloseButton-DrVWasKa.js";import"./Transition-r6s_Cs-y.js";const me=()=>{const N="https://backend-log2.axleshift.com/api/v1/auth",{register:u,handleSubmit:b,formState:{errors:t},reset:R}=O(),P=A(),k=s.useRef(null),x=s.useRef(),[a,h]=s.useState(!1),[i,n]=s.useState({message:"",type:""}),[g,L]=s.useState(!1),T=async c=>{h(!0),n({message:"",type:""});try{const l=await x.current.executeAsync(),f=await fetch(`${N}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...c,recaptcha_ref:l})}),m=await f.json();if(console.log("Response Data:",m),!f.ok)throw new Error(m.message||"Login failed");const{accessToken:I,refreshToken:v}=m;j.set("token",I,{expires:1,secure:!0,httpOnly:!0,sameSite:"Strict"}),j.set("refreshToken",v,{expires:1,secure:!0,httpOnly:!0,sameSite:"Strict"}),n({message:"Welcome back! Redirecting to your Supplier Page...",type:"success"}),R(),setTimeout(()=>P("/supplierspage"),2e3)}catch(l){n({message:l.message,type:"danger"})}finally{h(!1)}},E=()=>{L(c=>!c)};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsxs(D,{children:[e.jsx(q,{ref:x,size:"invisible",sitekey:V}),e.jsxs(p,{className:"justify-content-center",children:[e.jsxs(r,{md:4,className:"d-flex flex-column align-items-center justify-content-center bg-primary text-white",children:[e.jsx("h2",{children:"Supplier Login"}),e.jsx("p",{children:"Logistic Management System"}),e.jsx(d,{to:"/login",className:"text-white",children:"Vendor Portal â†’"})]}),e.jsx(r,{md:5,children:e.jsx(W,{children:e.jsx(B,{className:"p-4",children:e.jsxs($,{children:[i.message&&e.jsx(z,{color:i.type,dismissible:!0,children:i.message}),e.jsxs(H,{onSubmit:b(T),children:[e.jsx("h1",{children:"Supplier Login"}),e.jsx("p",{className:"text-body-secondary",children:"Sign In to your Supplier account"}),e.jsxs(C,{className:"mb-3",children:[e.jsx(S,{children:e.jsx(y,{icon:J})}),e.jsx(w,{ref:k,type:"text",placeholder:"Username",autoComplete:"username",...u("username",{required:"Username is required"})})]}),t.username&&e.jsx("p",{className:"text-danger",children:t.username.message}),e.jsxs(C,{className:"mb-4",children:[e.jsx(S,{children:e.jsx(y,{icon:_})}),e.jsx(w,{type:g?"text":"password",placeholder:"Password",autoComplete:"current-password",...u("password",{required:"Password is required"})}),e.jsx(o,{color:"secondary",variant:"outline",onClick:E,type:"button",children:e.jsx(F,{icon:g?G:U})})]}),t.password&&e.jsx("p",{className:"text-danger",children:t.password.message}),e.jsxs(p,{children:[e.jsx(r,{sm:5,children:e.jsx(o,{color:"success",variant:"outline",className:"px-4",type:"submit",disabled:a,children:a?"Logging in...":"LOGIN"})}),e.jsx(r,{xs:"auto",className:"me-auto",children:e.jsx(d,{to:"/forgotPass",children:e.jsx(o,{color:"danger",variant:"outline",className:"px-4",disabled:a,children:a?"Processing...":"FORGOT PASSWORD"})})})]}),e.jsx(p,{className:"mt-3",children:e.jsx(r,{xs:12,className:"text-center",children:e.jsx(d,{to:"/register",children:e.jsx(o,{color:"link",className:"px-0",children:"Register Now!"})})})})]})]})})})})]})]})})};export{me as default};
