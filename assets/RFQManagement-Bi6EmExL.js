import{r as n,i as Q,R as e,C as g}from"./index-CQ5bThOo.js";import{a as f}from"./index-C88pvD_q.js";import{C as y}from"./index.esm-RoxhmY7x.js";import{a as b,b as h}from"./CContainer-ezbfUEXV.js";import{C as R,a as v}from"./CCardBody-40k0tZjq.js";import{C as N}from"./CCardHeader-o14WNGm5.js";import{C as w}from"./CAlert-BpDF-SVL.js";import{C as S,a as H,b as d,c as i,d as D,e as s}from"./CTable-CF2NB-O5.js";import{C as T}from"./DefaultLayout-Ce1NCKt0.js";import{C as L,a as M}from"./CRow-JJupQ2Xr.js";import"./CCloseButton-Bt_Fn3tX.js";import"./CNavItem-8e7SXcnn.js";import"./cil-user-Ddrdy7PS.js";import"./index-DUVNt038.js";var k=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M479.6,399.716l-81.084-81.084-62.368-25.767A175.014,175.014,0,0,0,368,192c0-97.047-78.953-176-176-176S16,94.953,16,192,94.953,368,192,368a175.034,175.034,0,0,0,101.619-32.377l25.7,62.2L400.4,478.911a56,56,0,1,0,79.2-79.195ZM48,192c0-79.4,64.6-144,144-144s144,64.6,144,144S271.4,336,192,336,48,271.4,48,192ZM456.971,456.284a24.028,24.028,0,0,1-33.942,0l-76.572-76.572-23.894-57.835L380.4,345.771l76.573,76.572A24.028,24.028,0,0,1,456.971,456.284Z' class='ci-primary'/>"],V=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M96,472a23.82,23.82,0,0,0,23.579,24H392.421A23.82,23.82,0,0,0,416,472V152H96Zm32-288H384V464H128Z' class='ci-primary'/><rect width='32' height='200' x='168' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='240' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='312' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M328,88V40c0-13.458-9.488-24-21.6-24H205.6C193.488,16,184,26.542,184,40V88H64v32H448V88ZM216,48h80V88H216Z' class='ci-primary'/>"];const Z=()=>{const[c,l]=n.useState([]),[u,x]=n.useState(!0),[m,p]=n.useState(null),[E,C]=n.useState(null),A=Q();n.useEffect(()=>{(async()=>{var r,o;try{const a=await f.get("https://backend-log2.axleshift.com/api/v1/rfq");a.data&&Array.isArray(a.data.rfqs)?l(a.data.rfqs):Array.isArray(a.data)?l(a.data):(p("Unexpected API response format"),l([]))}catch(a){p(((o=(r=a.response)==null?void 0:r.data)==null?void 0:o.message)||"Failed to fetch RFQs")}finally{x(!1)}})()},[]);const F=async t=>{var r,o;if(window.confirm("Are you sure you want to delete this RFQ?")){C(t);try{await f.delete(`https://backend-log2.axleshift.com/api/v1/rfq/${t}`),l(c.filter(a=>a._id!==t))}catch(a){alert(((o=(r=a.response)==null?void 0:r.data)==null?void 0:o.message)||"Failed to delete RFQ")}finally{C(null)}}};return e.createElement(b,{className:"mt-4"},e.createElement(R,null,e.createElement(N,{className:"bg-primary text-white"},e.createElement("h4",{className:"mb-0"},"Request for Quotation (RFQ) List")),e.createElement(v,null,u&&e.createElement(g,{color:"primary",className:"d-block mx-auto my-3"}),m&&e.createElement(w,{color:"danger"},m),!u&&!m&&e.createElement(S,{hover:!0,responsive:!0,bordered:!0,borderColor:"secondary"},e.createElement(H,{color:"dark"},e.createElement(d,null,e.createElement(i,null,"RFQ ID"),e.createElement(i,null,"Title"),e.createElement(i,null,"Deadline"),e.createElement(i,null,"Status"),e.createElement(i,{className:"text-center"},"Actions"))),e.createElement(D,null,c.length>0?c.map(t=>{var r;return e.createElement(d,{key:t._id},e.createElement(s,null,t._id),e.createElement(s,null,((r=t.procurementId)==null?void 0:r.title)||"N/A"),e.createElement(s,null,t.deadline?new Date(t.deadline).toLocaleDateString():"No Deadline"),e.createElement(s,null,e.createElement(T,{color:t.status==="Approved"?"success":"warning"},t.status||"Pending")),e.createElement(s,{className:"text-center"},e.createElement(h,{color:"info",size:"sm",className:"me-2",onClick:()=>A(`/procurement/rfq/${t._id}`)},e.createElement(y,{icon:k,className:"me-1"}),"View"),e.createElement(h,{color:"danger",size:"sm",onClick:()=>F(t._id),disabled:E===t._id},e.createElement(y,{icon:V,className:"me-1"}),E===t._id?"Deleting...":"Delete")))}):e.createElement(d,null,e.createElement(s,{colSpan:"5",className:"text-center"},"No RFQs found")))))))},Y=()=>{const[c,l]=n.useState(!1);return n.useEffect(()=>{l(!0),setTimeout(()=>l(!1),1e3)},[]),e.createElement(b,null,e.createElement(L,{className:"mb-3"},e.createElement(M,null,e.createElement(R,null,e.createElement(N,{className:"d-flex justify-content-between align-items-center"},e.createElement("h5",null,"RFQ Management"),c&&e.createElement(g,{color:"primary"})),e.createElement(v,null,c?e.createElement(w,{color:"info"},"Loading data..."):e.createElement(Z,null))))))};export{Y as default};
