import{u as x,r as n,R as e}from"./index-BuyPBthV.js";import{a as g}from"./index-xsH4HHeE.js";import{C as P}from"./CFormSelect-QU3Ik6FC.js";import{a as V}from"./CFormInput-CSoJADs1.js";import{g as j,h as B,j as b,k as s,l as _,m as o,c as $,d as M,e as D,f as L}from"./CTable-JDSNWlXE.js";import{c}from"./CRow-DtAWSn5d.js";import"./CCloseButton-CxYk9sGR.js";const H="https://backend-log2.axleshift.com",N=`${H}/api/v1/vendor-quotes`,Y=()=>{var C,h;const{accessToken:i}=x(),[m,A]=n.useState([]),[S,u]=n.useState([]),[r,F]=n.useState(null),[Q,R]=n.useState("All"),[w,y]=n.useState(""),[I,d]=n.useState(!1),E=async()=>{try{const t=await g.get(N,{headers:{Authorization:`Bearer ${i}`}});A(t.data),u(t.data)}catch(t){console.error("Failed to fetch vendor quotes",t)}};n.useEffect(()=>{E()},[]);const T=t=>{R(t),u(t==="All"?m:m.filter(a=>a.status===t))},k=t=>{const a=t.target.value.toLowerCase();y(t.target.value),u(m.filter(l=>{var f,v;return(((f=l.vendorId)==null?void 0:f.businessName)||((v=l.vendorId)==null?void 0:v.fullName)||"").toLowerCase().includes(a)}))},p=async(t,a)=>{try{await g.put(`${N}/${t}/status`,{status:a},{headers:{Authorization:`Bearer ${i}`}}),E()}catch(l){console.error("Failed to update status",l)}};return e.createElement("div",{className:"p-4 max-w-4xl mx-auto"},e.createElement("h1",{className:"mb-4 fw-bold"},"RFQ Details â€“ Submitted Quotes"),e.createElement("div",{className:"d-flex justify-content-between mb-3"},e.createElement(P,{value:Q,onChange:t=>T(t.target.value)},e.createElement("option",{value:"All"},"All"),e.createElement("option",{value:"Pending"},"Pending"),e.createElement("option",{value:"Accepted"},"Accepted"),e.createElement("option",{value:"Rejected"},"Rejected")),e.createElement(V,{placeholder:"Search Vendor",value:w,onChange:k})),e.createElement(j,{striped:!0,hover:!0,responsive:!0},e.createElement(B,null,e.createElement(b,null,e.createElement(s,null,"Vendor Name"),e.createElement(s,null,"Price"),e.createElement(s,null,"Status"),e.createElement(s,null,"Actions"))),e.createElement(_,null,S.map(t=>{var a,l;return e.createElement(b,{key:t._id},e.createElement(o,null,((a=t.vendorId)==null?void 0:a.businessName)||((l=t.vendorId)==null?void 0:l.fullName)||"N/A"),e.createElement(o,null,"$",t.price),e.createElement(o,null,t.status),e.createElement(o,null,e.createElement(c,{color:"info",onClick:()=>{F(t),d(!0)}},"View"),t.status==="Pending"&&e.createElement(e.Fragment,null,e.createElement(c,{color:"success",className:"ms-2",onClick:()=>p(t._id,"Accepted")},"Accept"),e.createElement(c,{color:"danger",className:"ms-2",onClick:()=>p(t._id,"Rejected")},"Reject"))))}))),e.createElement($,{visible:I,onClose:()=>d(!1)},e.createElement(M,{closeButton:!0},"Quote Details"),e.createElement(D,null,r&&e.createElement(e.Fragment,null,e.createElement("p",null,e.createElement("strong",null,"Vendor:")," ",((C=r.vendorId)==null?void 0:C.businessName)||((h=r.vendorId)==null?void 0:h.fullName)||"N/A"),e.createElement("p",null,e.createElement("strong",null,"Price:"),r.price),e.createElement("p",null,e.createElement("strong",null,"Details:")," ",r.details||"No details provided."))),e.createElement(L,null,e.createElement(c,{color:"secondary",onClick:()=>d(!1)},"Close"))))};export{Y as default};
