import{u as y,r as a,R as e}from"./index-CZbhyFiD.js";import{a as p}from"./index-xsH4HHeE.js";import{C as N}from"./CFormSelect-D4tEM1WW.js";import{a as k}from"./CFormInput-Di6goj5o.js";import{g as x,h as T,j as C,k as r,l as P,m as s,c as V,d as $,e as j,f as B}from"./CTable-CR8nuKb2.js";import{c as o}from"./CRow-DAWJ6kQb.js";import"./CCloseButton-BPwTVHYG.js";const _="https://backend-log2.axleshift.com",h=`${_}/api/v1/vendor-quotes`,G=()=>{const{accessToken:i}=y(),[c,f]=a.useState([]),[g,m]=a.useState([]),[n,v]=a.useState(null),[b,A]=a.useState("All"),[S,F]=a.useState(""),[Q,u]=a.useState(!1),d=async()=>{try{const t=await p.get(h,{headers:{Authorization:`Bearer ${i}`}});f(t.data),m(t.data)}catch{console.error("Failed to fetch vendor quotes")}};a.useEffect(()=>{d()},[]);const R=t=>{A(t),m(t==="All"?c:c.filter(l=>l.status===t))},w=t=>{F(t.target.value),m(c.filter(l=>l.vendorName.toLowerCase().includes(t.target.value.toLowerCase())))},E=async(t,l)=>{try{await p.put(`${h}/${t}/status`,{status:l},{headers:{Authorization:`Bearer ${i}`}}),d()}catch{console.error("Failed to update status")}};return e.createElement("div",{className:"p-4 max-w-4xl mx-auto"},e.createElement("h1",{className:"mb-4 fw-bold"},"RFQ Details â€“ Submitted Quotes"),e.createElement("div",{className:"d-flex justify-content-between mb-3"},e.createElement(N,{value:b,onChange:t=>R(t.target.value)},e.createElement("option",{value:"All"},"All"),e.createElement("option",{value:"Pending"},"Pending"),e.createElement("option",{value:"Accepted"},"Accepted"),e.createElement("option",{value:"Rejected"},"Rejected")),e.createElement(k,{placeholder:"Search Vendor",value:S,onChange:w})),e.createElement(x,{striped:!0,hover:!0,responsive:!0},e.createElement(T,null,e.createElement(C,null,e.createElement(r,null,"Vendor Name"),e.createElement(r,null,"Price"),e.createElement(r,null,"Status"),e.createElement(r,null,"Actions"))),e.createElement(P,null,g.map(t=>e.createElement(C,{key:t._id},e.createElement(s,null,t.vendorName),e.createElement(s,null,"$",t.price),e.createElement(s,null,t.status),e.createElement(s,null,e.createElement(o,{color:"info",onClick:()=>{v(t),u(!0)}},"View"),t.status==="Pending"&&e.createElement(e.Fragment,null,e.createElement(o,{color:"success",className:"ms-2",onClick:()=>E(t._id,"Accepted")},"Accept"),e.createElement(o,{color:"danger",className:"ms-2",onClick:()=>E(t._id,"Rejected")},"Reject"))))))),e.createElement(V,{visible:Q,onClose:()=>u(!1)},e.createElement($,{closeButton:!0},"Quote Details"),e.createElement(j,null,n&&e.createElement(e.Fragment,null,e.createElement("p",null,e.createElement("strong",null,"Vendor:")," ",n.vendorName),e.createElement("p",null,e.createElement("strong",null,"Price:")," $",n.price),e.createElement("p",null,e.createElement("strong",null,"Details:")," ",n.details))),e.createElement(B,null,e.createElement(o,{color:"secondary",onClick:()=>u(!1)},"Close"))))};export{G as default};
