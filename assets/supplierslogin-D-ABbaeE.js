import{P as m,r as R,n as be,f as Se,j as o,L as B}from"./index-DIuMn50O.js";import{u as we,c as je}from"./index.esm-CegFSc_L.js";import{p as ie}from"./purify.es-CCJo14B2.js";import{C as se}from"./index.esm-C__UGevs.js";import{F as Re,d as _e,e as Oe}from"./index-DCnamT6g.js";import{a as ae}from"./js.cookie-CRA5wM0A.js";import{C as Ce,a as T}from"./CContainer-BB4SI4Be.js";import{C as ce,a as L}from"./CRow-ptA_khgd.js";import{C as Le}from"./CCardGroup-Cks64lfv.js";import{C as Pe,a as Ee}from"./CCardBody-WtYlQYQD.js";import{C as Ne}from"./CAlert-CpEiJNxq.js";import{C as Ie}from"./CForm-tcAnQ6iK.js";import{C as de,a as pe}from"./CInputGroupText-BQ5MQS7t.js";import{c as Te}from"./cil-user-Ddrdy7PS.js";import{C as ue}from"./CFormInput-aTtMhUOR.js";import"./Transition-DtCpV_C4.js";var $e=["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl","isolated"];function K(){return K=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},K.apply(this,arguments)}function Ae(e,n){if(e==null)return{};var i={},r=Object.keys(e),t,d;for(d=0;d<r.length;d++)t=r[d],!(n.indexOf(t)>=0)&&(i[t]=e[t]);return i}function $(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ke(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,J(e,n)}function J(e,n){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,t){return r.__proto__=t,r},J(e,n)}var A=function(e){ke(n,e);function n(){var r;return r=e.call(this)||this,r.handleExpired=r.handleExpired.bind($(r)),r.handleErrored=r.handleErrored.bind($(r)),r.handleChange=r.handleChange.bind($(r)),r.handleRecaptchaRef=r.handleRecaptchaRef.bind($(r)),r}var i=n.prototype;return i.getCaptchaFunction=function(t){return this.props.grecaptcha?this.props.grecaptcha.enterprise?this.props.grecaptcha.enterprise[t]:this.props.grecaptcha[t]:null},i.getValue=function(){var t=this.getCaptchaFunction("getResponse");return t&&this._widgetId!==void 0?t(this._widgetId):null},i.getWidgetId=function(){return this.props.grecaptcha&&this._widgetId!==void 0?this._widgetId:null},i.execute=function(){var t=this.getCaptchaFunction("execute");if(t&&this._widgetId!==void 0)return t(this._widgetId);this._executeRequested=!0},i.executeAsync=function(){var t=this;return new Promise(function(d,y){t.executionResolve=d,t.executionReject=y,t.execute()})},i.reset=function(){var t=this.getCaptchaFunction("reset");t&&this._widgetId!==void 0&&t(this._widgetId)},i.forceReset=function(){var t=this.getCaptchaFunction("reset");t&&t()},i.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.handleChange(null)},i.handleErrored=function(){this.props.onErrored&&this.props.onErrored(),this.executionReject&&(this.executionReject(),delete this.executionResolve,delete this.executionReject)},i.handleChange=function(t){this.props.onChange&&this.props.onChange(t),this.executionResolve&&(this.executionResolve(t),delete this.executionReject,delete this.executionResolve)},i.explicitRender=function(){var t=this.getCaptchaFunction("render");if(t&&this._widgetId===void 0){var d=document.createElement("div");this._widgetId=t(d,{sitekey:this.props.sitekey,callback:this.handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge,isolated:this.props.isolated}),this.captcha.appendChild(d)}this._executeRequested&&this.props.grecaptcha&&this._widgetId!==void 0&&(this._executeRequested=!1,this.execute())},i.componentDidMount=function(){this.explicitRender()},i.componentDidUpdate=function(){this.explicitRender()},i.handleRecaptchaRef=function(t){this.captcha=t},i.render=function(){var t=this.props;t.sitekey,t.onChange,t.theme,t.type,t.tabindex,t.onExpired,t.onErrored,t.size,t.stoken,t.grecaptcha,t.badge,t.hl,t.isolated;var d=Ae(t,$e);return R.createElement("div",K({},d,{ref:this.handleRecaptchaRef}))},n}(R.Component);A.displayName="ReCAPTCHA";A.propTypes={sitekey:m.string.isRequired,onChange:m.func,grecaptcha:m.object,theme:m.oneOf(["dark","light"]),type:m.oneOf(["image","audio"]),tabindex:m.number,onExpired:m.func,onErrored:m.func,size:m.oneOf(["compact","normal","invisible"]),stoken:m.string,hl:m.string,badge:m.oneOf(["bottomright","bottomleft","inline"]),isolated:m.bool};A.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};var me={exports:{}},a={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p=typeof Symbol=="function"&&Symbol.for,Z=p?Symbol.for("react.element"):60103,ee=p?Symbol.for("react.portal"):60106,k=p?Symbol.for("react.fragment"):60107,F=p?Symbol.for("react.strict_mode"):60108,D=p?Symbol.for("react.profiler"):60114,U=p?Symbol.for("react.provider"):60109,M=p?Symbol.for("react.context"):60110,te=p?Symbol.for("react.async_mode"):60111,z=p?Symbol.for("react.concurrent_mode"):60111,q=p?Symbol.for("react.forward_ref"):60112,G=p?Symbol.for("react.suspense"):60113,Fe=p?Symbol.for("react.suspense_list"):60120,H=p?Symbol.for("react.memo"):60115,W=p?Symbol.for("react.lazy"):60116,De=p?Symbol.for("react.block"):60121,Ue=p?Symbol.for("react.fundamental"):60117,Me=p?Symbol.for("react.responder"):60118,ze=p?Symbol.for("react.scope"):60119;function g(e){if(typeof e=="object"&&e!==null){var n=e.$$typeof;switch(n){case Z:switch(e=e.type,e){case te:case z:case k:case D:case F:case G:return e;default:switch(e=e&&e.$$typeof,e){case M:case q:case W:case H:case U:return e;default:return n}}case ee:return n}}}function ye(e){return g(e)===z}a.AsyncMode=te;a.ConcurrentMode=z;a.ContextConsumer=M;a.ContextProvider=U;a.Element=Z;a.ForwardRef=q;a.Fragment=k;a.Lazy=W;a.Memo=H;a.Portal=ee;a.Profiler=D;a.StrictMode=F;a.Suspense=G;a.isAsyncMode=function(e){return ye(e)||g(e)===te};a.isConcurrentMode=ye;a.isContextConsumer=function(e){return g(e)===M};a.isContextProvider=function(e){return g(e)===U};a.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Z};a.isForwardRef=function(e){return g(e)===q};a.isFragment=function(e){return g(e)===k};a.isLazy=function(e){return g(e)===W};a.isMemo=function(e){return g(e)===H};a.isPortal=function(e){return g(e)===ee};a.isProfiler=function(e){return g(e)===D};a.isStrictMode=function(e){return g(e)===F};a.isSuspense=function(e){return g(e)===G};a.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===k||e===z||e===D||e===F||e===G||e===Fe||typeof e=="object"&&e!==null&&(e.$$typeof===W||e.$$typeof===H||e.$$typeof===U||e.$$typeof===M||e.$$typeof===q||e.$$typeof===Ue||e.$$typeof===Me||e.$$typeof===ze||e.$$typeof===De)};a.typeOf=g;me.exports=a;var qe=me.exports,re=qe,Ge={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},He={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},We={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ge={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ne={};ne[re.ForwardRef]=We;ne[re.Memo]=ge;function le(e){return re.isMemo(e)?ge:ne[e.$$typeof]||Ge}var Ve=Object.defineProperty,Be=Object.getOwnPropertyNames,fe=Object.getOwnPropertySymbols,Ke=Object.getOwnPropertyDescriptor,Je=Object.getPrototypeOf,he=Object.prototype;function xe(e,n,i){if(typeof n!="string"){if(he){var r=Je(n);r&&r!==he&&xe(e,r,i)}var t=Be(n);fe&&(t=t.concat(fe(n)));for(var d=le(e),y=le(n),x=0;x<t.length;++x){var u=t[x];if(!He[u]&&!(i&&i[u])&&!(y&&y[u])&&!(d&&d[u])){var l=Ke(n,u);try{Ve(e,u,l)}catch{}}}}return e}var Ye=xe;const Qe=be(Ye);function Y(){return Y=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},Y.apply(this,arguments)}function Xe(e,n){if(e==null)return{};var i={},r=Object.keys(e),t,d;for(d=0;d<r.length;d++)t=r[d],!(n.indexOf(t)>=0)&&(i[t]=e[t]);return i}function Ze(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n}var j={},et=0;function tt(e,n){return n=n||{},function(r){var t=r.displayName||r.name||"Component",d=function(x){Ze(u,x);function u(v,c){var s;return s=x.call(this,v,c)||this,s.state={},s.__scriptURL="",s}var l=u.prototype;return l.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+et++),this.__scriptLoaderID},l.setupScriptURL=function(){return this.__scriptURL=typeof e=="function"?e():e,this.__scriptURL},l.asyncScriptLoaderHandleLoad=function(c){var s=this;this.setState(c,function(){return s.props.asyncScriptOnLoad&&s.props.asyncScriptOnLoad(s.state)})},l.asyncScriptLoaderTriggerOnScriptLoaded=function(){var c=j[this.__scriptURL];if(!c||!c.loaded)throw new Error("Script is not loaded.");for(var s in c.observers)c.observers[s](c);delete window[n.callbackName]},l.componentDidMount=function(){var c=this,s=this.setupScriptURL(),f=this.asyncScriptLoaderGetScriptLoaderID(),h=n,P=h.globalName,O=h.callbackName,E=h.scriptId;if(P&&typeof window[P]<"u"&&(j[s]={loaded:!0,observers:{}}),j[s]){var b=j[s];if(b&&(b.loaded||b.errored)){this.asyncScriptLoaderHandleLoad(b);return}b.observers[f]=function(S){return c.asyncScriptLoaderHandleLoad(S)};return}var _={};_[f]=function(S){return c.asyncScriptLoaderHandleLoad(S)},j[s]={loaded:!1,observers:_};var w=document.createElement("script");w.src=s,w.async=!0;for(var N in n.attributes)w.setAttribute(N,n.attributes[N]);E&&(w.id=E);var I=function(C){if(j[s]){var ve=j[s],V=ve.observers;for(var oe in V)C(V[oe])&&delete V[oe]}};O&&typeof window<"u"&&(window[O]=function(){return c.asyncScriptLoaderTriggerOnScriptLoaded()}),w.onload=function(){var S=j[s];S&&(S.loaded=!0,I(function(C){return O?!1:(C(S),!0)}))},w.onerror=function(){var S=j[s];S&&(S.errored=!0,I(function(C){return C(S),!0}))},document.body.appendChild(w)},l.componentWillUnmount=function(){var c=this.__scriptURL;if(n.removeOnUnmount===!0)for(var s=document.getElementsByTagName("script"),f=0;f<s.length;f+=1)s[f].src.indexOf(c)>-1&&s[f].parentNode&&s[f].parentNode.removeChild(s[f]);var h=j[c];h&&(delete h.observers[this.asyncScriptLoaderGetScriptLoaderID()],n.removeOnUnmount===!0&&delete j[c])},l.render=function(){var c=n.globalName,s=this.props;s.asyncScriptOnLoad;var f=s.forwardedRef,h=Xe(s,["asyncScriptOnLoad","forwardedRef"]);return c&&typeof window<"u"&&(h[c]=typeof window[c]<"u"?window[c]:void 0),h.ref=f,R.createElement(r,h)},u}(R.Component),y=R.forwardRef(function(x,u){return R.createElement(d,Y({},x,{forwardedRef:u}))});return y.displayName="AsyncScriptLoader("+t+")",y.propTypes={asyncScriptOnLoad:m.func},Qe(y,r)}}var Q="onloadcallback",rt="grecaptcha";function X(){return typeof window<"u"&&window.recaptchaOptions||{}}function nt(){var e=X(),n=e.useRecaptchaNet?"recaptcha.net":"www.google.com";return e.enterprise?"https://"+n+"/recaptcha/enterprise.js?onload="+Q+"&render=explicit":"https://"+n+"/recaptcha/api.js?onload="+Q+"&render=explicit"}const ot=tt(nt,{callbackName:Q,globalName:rt,attributes:X().nonce?{nonce:X().nonce}:{}})(A);function St(){const e="undefined/api/v1/auth",{register:n,handleSubmit:i,formState:{errors:r},reset:t}=we(),d=Se(),[y,x]=R.useState(!1),[u,l]=R.useState({message:"",type:""}),[v,c]=R.useState(!1),[s,f]=R.useState(null),h=R.useRef(),P=async b=>{const _=await fetch(`${e}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!_.ok){const w=await _.json();throw new Error(w.message||"Login failed")}return _.json()},O=async b=>{if(x(!0),l({message:"",type:""}),!s){l({message:"Please complete the reCAPTCHA",type:"danger"}),x(!1);return}try{const _={username:ie.sanitize(b.username),password:ie.sanitize(b.password),recaptchaToken:s},w=await P(_),{accessToken:N,refreshToken:I}=w;ae.set("token",N,{expires:1}),ae.set("refreshToken",I,{expires:1}),l({message:"Welcome back! Redirecting to your SupplierPage...",type:"success"}),t(),setTimeout(()=>d("/supplierspage"),2e3)}catch(_){l({message:_.message,type:"danger"})}finally{x(!1),f(null),h.current&&h.current.reset()}},E=()=>{c(b=>!b)};return o.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:o.jsx(Ce,{children:o.jsxs(ce,{className:"justify-content-center",children:[o.jsxs(L,{md:4,className:"d-flex flex-column align-items-center justify-content-center bg-primary text-white",children:[o.jsx("h2",{children:"Supplier Login"}),o.jsx("p",{children:"Logistic Management System"}),o.jsx(B,{to:"/Login",className:"text-white",children:"Vendor Portal →"})]}),o.jsx(L,{md:5,children:o.jsx(Le,{children:o.jsx(Pe,{className:"p-4",children:o.jsxs(Ee,{children:[u.message&&o.jsx(Ne,{color:u.type,dismissible:!0,children:u.message}),o.jsxs(Ie,{onSubmit:i(O),children:[o.jsx("h1",{children:"Login"}),o.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),o.jsxs(de,{className:"mb-3",children:[o.jsx(pe,{children:o.jsx(se,{icon:Te})}),o.jsx(ue,{type:"text",placeholder:"Username",autoComplete:"username",...n("username",{required:"Username is required"})})]}),r.username&&o.jsx("p",{className:"text-danger",children:r.username.message}),o.jsxs(de,{className:"mb-4",children:[o.jsx(pe,{children:o.jsx(se,{icon:je})}),o.jsx(ue,{type:v?"text":"password",placeholder:"Password",autoComplete:"current-password",...n("password",{required:"Password is required"})}),o.jsx(T,{color:"secondary",variant:"outline",onClick:E,type:"button",children:o.jsx(Re,{icon:v?_e:Oe})})]}),r.password&&o.jsx("p",{className:"text-danger",children:r.password.message}),o.jsx("div",{className:"mb-3",children:o.jsx(ot,{ref:h,sitekey:void 0,onChange:f})}),o.jsxs(ce,{children:[o.jsx(L,{sm:5,children:o.jsx(T,{color:"success",variant:"outline",className:"px-4",type:"submit",disabled:y,children:y?"Logging in...":"LOGIN"})}),o.jsx(L,{xs:"auto",className:"me-auto",children:o.jsx(B,{to:"/forgotPass",children:o.jsx(T,{color:"danger",variant:"outline",className:"px-4",disabled:y,children:y?"Processing...":"FORGOT PASSWORD"})})}),o.jsx(L,{xs:4,children:o.jsx(B,{to:"/register",children:o.jsx(T,{color:"link",className:"px-0",children:"Register Now!"})})})]})]})]})})})})]})})})}export{St as default};
