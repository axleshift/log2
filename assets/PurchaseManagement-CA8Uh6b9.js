import{r as n,R as e,C as A}from"./index-CQ5bThOo.js";import{C as B}from"./CForm-CgwFVwc3.js";import{C as d,a}from"./CRow-JJupQ2Xr.js";import{C as s}from"./CFormInput-C2PVtSjy.js";import{C as _}from"./CFormSelect-DG0yTiiw.js";import{b as M}from"./CContainer-ezbfUEXV.js";import{C as F,a as L,b as k,c as H}from"./CToaster-BmyxsD3g.js";import{C as K,a as Z}from"./CCardBody-40k0tZjq.js";import{C as $}from"./CCardHeader-o14WNGm5.js";import{C as q}from"./CAlert-BpDF-SVL.js";import{C as j,a as z,b as V,c as h,d as Q,e as b}from"./CTable-CF2NB-O5.js";import{C as U}from"./DefaultLayout-Ce1NCKt0.js";import"./CFormControlWrapper-BsUibFdB.js";import"./CCloseButton-Bt_Fn3tX.js";import"./CNavItem-8e7SXcnn.js";import"./index.esm-RoxhmY7x.js";import"./cil-user-Ddrdy7PS.js";import"./index-DUVNt038.js";const G=[{_id:"1",companyName:"Vendor A"},{_id:"2",companyName:"Vendor B"},{_id:"3",companyName:"Vendor C"}],J=[{_id:"1",description:"Product A",unitPrice:10},{_id:"2",description:"Product B",unitPrice:20},{_id:"3",description:"Product C",unitPrice:30}],W={message:"Purchase order successfully created!"},X=()=>{const[t,c]=n.useState({poNumber:"",orderDate:"",receiveDate:"",carrier:"",vendorId:"",shipTo:{companyName:"",receiver:"",address:"",phone:""},vendor:{companyName:"",address:"",phone:""},details:[{productId:"",quantity:"",subTotal:0}]}),[p,E]=n.useState([]),[C,P]=n.useState([]),[v,l]=n.useState(!1),[y,i]=n.useState(!1),[I,N]=n.useState(""),[S,O]=n.useState("");n.useEffect(()=>{E(G),P(J)},[]);const r=o=>{var x;const{name:m,value:f}=o.target;if(m.includes("shipTo")||m.includes("vendor")){const[T,u]=m.split(".");c({...t,[T]:{...t[T],[u]:f}})}else if(m.includes("details")){const[T,u,D]=m.split("."),g=[...t.details];g[u][D]=f,D==="quantity"&&(g[u].subTotal=g[u].quantity*((x=C.find(R=>R._id===t.details[u].productId))==null?void 0:x.unitPrice)||0),c({...t,details:g})}else c({...t,[m]:f})},w=async o=>{o.preventDefault(),l(!0);try{N(W.message),O("success"),i(!0),setTimeout(()=>i(!1),5e3),c({poNumber:"",orderDate:"",receiveDate:"",carrier:"",vendorId:"",shipTo:{companyName:"",receiver:"",address:"",phone:""},vendor:{companyName:"",address:"",phone:""},details:[{productId:"",quantity:"",subTotal:0}]})}catch{N("Error creating purchase order"),O("danger"),i(!0),setTimeout(()=>i(!1),5e3)}finally{l(!1)}};return e.createElement(e.Fragment,null,e.createElement(B,{onSubmit:w},e.createElement(d,{className:"mb-3"},e.createElement(a,{md:6},e.createElement(s,{type:"text",name:"poNumber",value:t.poNumber,onChange:r,label:"PO Number",required:!0})),e.createElement(a,{md:6},e.createElement(s,{type:"date",name:"orderDate",value:t.orderDate,onChange:r,label:"Order Date",required:!0}))),e.createElement(d,{className:"mb-3"},e.createElement(a,{md:6},e.createElement(s,{type:"date",name:"receiveDate",value:t.receiveDate,onChange:r,label:"Receive Date",required:!0})),e.createElement(a,{md:6},e.createElement(s,{type:"text",name:"carrier",value:t.carrier,onChange:r,label:"Carrier",required:!0}))),e.createElement(d,{className:"mb-3"},e.createElement(a,{md:6},e.createElement(_,{name:"vendorId",value:t.vendorId,onChange:r,label:"Select Vendor",required:!0},e.createElement("option",{value:""},"Choose Vendor"),p.map(o=>e.createElement("option",{key:o._id,value:o._id},o.companyName))))),e.createElement(d,{className:"mb-3"},e.createElement(a,{md:6},e.createElement(s,{type:"text",name:"vendor.address",value:t.vendor.address,onChange:r,label:"Vendor Address",required:!0})),e.createElement(a,{md:6},e.createElement(s,{type:"text",name:"vendor.phone",value:t.vendor.phone,onChange:r,label:"Vendor Phone",required:!0}))),e.createElement(d,{className:"mb-3"},e.createElement(a,{md:6},e.createElement(s,{type:"text",name:"shipTo.companyName",value:t.shipTo.companyName,onChange:r,label:"Ship To Company",required:!0})),e.createElement(a,{md:6},e.createElement(s,{type:"text",name:"shipTo.receiver",value:t.shipTo.receiver,onChange:r,label:"Receiver",required:!0}))),e.createElement(d,{className:"mb-3"},e.createElement(a,{md:6},e.createElement(s,{type:"text",name:"shipTo.address",value:t.shipTo.address,onChange:r,label:"Ship To Address",required:!0})),e.createElement(a,{md:6},e.createElement(s,{type:"text",name:"shipTo.phone",value:t.shipTo.phone,onChange:r,label:"Receiver Phone",required:!0}))),e.createElement(d,{className:"mb-3"},e.createElement(a,{md:6},e.createElement(_,{name:"details.0.productId",value:t.details[0].productId,onChange:r,label:"Select Product",required:!0},e.createElement("option",{value:""},"Choose Product"),C.map(o=>e.createElement("option",{key:o._id,value:o._id},o.description)))),e.createElement(a,{md:6},e.createElement(s,{type:"number",name:"details.0.quantity",value:t.details[0].quantity,onChange:r,label:"Quantity",required:!0}))),e.createElement(d,{className:"mb-3"},e.createElement(a,{md:6},e.createElement(s,{type:"text",name:"details.0.subTotal",value:t.details[0].subTotal,disabled:!0,label:"Sub Total"}))),e.createElement(M,{color:"primary",type:"submit",disabled:v},v?e.createElement(A,{size:"sm"}):"Submit PO")),e.createElement(F,{position:"top-center",visible:y?"true":void 0},e.createElement(L,{color:S},e.createElement(k,{closeButton:!0},S==="success"?"Success":"Error"),e.createElement(H,null,I))))},Y=()=>{const[t,c]=n.useState([]),[p,E]=n.useState(!0),[C,P]=n.useState(null),v=[{_id:"PO12345",vendor:{name:"Vendor A"},totalPrice:"$5000",status:"Pending",createdAt:"2025-03-01T08:30:00Z"},{_id:"PO12346",vendor:{name:"Vendor B"},totalPrice:"$3000",status:"Approved",createdAt:"2025-02-28T10:00:00Z"},{_id:"PO12347",vendor:{name:"Vendor C"},totalPrice:"$4500",status:"Rejected",createdAt:"2025-02-27T12:00:00Z"}];return n.useEffect(()=>{(async()=>{E(!0);try{setTimeout(()=>{c(v),E(!1)},1e3)}catch{P("Failed to load Purchase Orders."),E(!1)}})()},[]),e.createElement(K,{className:"shadow-sm"},e.createElement($,{className:"bg-primary text-white fw-bold"},"Purchase Orders"),e.createElement(Z,null,p?e.createElement("div",{className:"text-center my-3"},e.createElement(A,{color:"primary"})):C?e.createElement(q,{color:"danger",className:"text-center"},C):t.length>0?e.createElement(e.Fragment,null,e.createElement(j,{hover:!0,responsive:!0,className:"text-center"},e.createElement(z,null,e.createElement(V,null,e.createElement(h,null,"PO ID"),e.createElement(h,null,"Vendor"),e.createElement(h,null,"Total Price"),e.createElement(h,null,"Status"),e.createElement(h,null,"Created At"))),e.createElement(Q,null,t.map((l,y)=>{var i;return e.createElement(V,{key:y},e.createElement(b,null,l._id),e.createElement(b,null,((i=l.vendor)==null?void 0:i.name)||"N/A"),e.createElement(b,null,l.totalPrice),e.createElement(b,null,e.createElement(U,{color:l.status==="Pending"?"warning":l.status==="Approved"?"success":"danger"},l.status)),e.createElement(b,null,new Date(l.createdAt).toLocaleDateString()))})))):e.createElement(q,{color:"warning",className:"text-center"},"No Purchase Orders found.")))},ve=()=>{const[t,c]=n.useState(!1),p=()=>{c(!t)};return e.createElement("div",{className:"p-6"},e.createElement("h1",{className:"text-2xl font-bold mb-4"},"Purchase Order Management"),e.createElement("div",{className:"mb-4"},e.createElement("button",{onClick:p,className:"px-4 py-2 bg-blue-500 text-white rounded-md shadow-md hover:bg-blue-600"},t?"View Purchase Orders":"Create New Purchase Order")),t?e.createElement(X,null):e.createElement(Y,null))};export{ve as default};
