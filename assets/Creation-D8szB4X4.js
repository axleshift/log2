import{R as e,C as z,P as t,u as L,l as Q,r as p}from"./index-4l8YDPMt.js";import{C as $}from"./CForm-BlATjbC-.js";import{C as x}from"./CAlert-D1awv8uF.js";import{a as d,b as l,c as M,d as U}from"./CRow-Dstcvhhn.js";import{a as c}from"./CFormInput-5eZtoBd3.js";import{C as w}from"./CFormSelect-Q2Zp1re3.js";import{C as W}from"./CFormTextarea-D45f2w8t.js";import{a as B}from"./index-t--hEgTQ.js";import{C as I,a as X}from"./CCardBody-DYN-5Bvl.js";import{C as j}from"./CCardHeader-CF_x8B1s.js";import"./CCloseButton-CN5zlj3N.js";function y({formData:n,handleChange:r,handleFileChange:a,handleSubmit:u,loading:h,error:E}){return e.createElement($,{onSubmit:u},E&&e.createElement(x,{color:"danger"},E),e.createElement(d,{className:"mb-3"},e.createElement(l,{md:6},e.createElement(c,{name:"name",label:"Product Name",value:n.name||"",onChange:r,required:!0})),e.createElement(l,{md:6},e.createElement(c,{name:"sku",label:"SKU",value:n.sku||"",onChange:r,disabled:!0}))),e.createElement(d,{className:"mb-3"},e.createElement(l,{md:6},e.createElement(c,{name:"price",type:"number",label:"Price",value:n.price||"",onChange:r,required:!0})),e.createElement(l,{md:6},e.createElement(c,{name:"stockQuantity",type:"number",label:"Stock Quantity",value:n.stockQuantity||"",onChange:r}))),e.createElement(d,{className:"mb-3"},e.createElement(l,{md:6},e.createElement(w,{name:"category",label:"Category",value:n.category||"",onChange:r,required:!0},e.createElement("option",{value:""},"Select Category"),e.createElement("option",{value:"Electronics"},"Electronics"),e.createElement("option",{value:"Clothing"},"Clothing"),e.createElement("option",{value:"Furniture"},"Furniture"),e.createElement("option",{value:"Logistics"},"Logistics"),e.createElement("option",{value:"Office Supplies"},"Office Supplies"))),e.createElement(l,{md:6},e.createElement(w,{name:"status",label:"Status",value:n.status||"",onChange:r},e.createElement("option",{value:"Available"},"Available"),e.createElement("option",{value:"Out of Stock"},"Out of Stock"),e.createElement("option",{value:"Discontinued"},"Discontinued")))),e.createElement(W,{name:"description",label:"Description",rows:3,value:n.description||"",onChange:r,className:"mb-3",required:!0}),e.createElement(d,{className:"mb-3"},e.createElement(l,{md:3},e.createElement(c,{name:"length",label:"Length (cm)",value:n.length||"",onChange:r})),e.createElement(l,{md:3},e.createElement(c,{name:"width",label:"Width (cm)",value:n.width||"",onChange:r})),e.createElement(l,{md:3},e.createElement(c,{name:"height",label:"Height (cm)",value:n.height||"",onChange:r})),e.createElement(l,{md:3},e.createElement(c,{name:"weight",label:"Weight (kg)",value:n.weight||"",onChange:r}))),e.createElement(d,{className:"mb-3"},e.createElement(l,{md:6},e.createElement(c,{name:"manufacturer",label:"Manufacturer",value:n.manufacturer||"",onChange:r})),e.createElement(l,{md:3},e.createElement(c,{name:"color",label:"Color",value:n.color||"",onChange:r})),e.createElement(l,{md:3},e.createElement(c,{name:"size",label:"Size",value:n.size||"",onChange:r}))),e.createElement(c,{name:"tags",label:"Tags (comma-separated)",value:n.tags||"",onChange:r,className:"mb-3"}),e.createElement(c,{name:"images",type:"file",label:"Product Images",multiple:!0,onChange:a,className:"mb-4"}),e.createElement(M,{color:"success",type:"submit",disabled:h},h?e.createElement(z,{size:"sm"}):"Create Product"))}y.propTypes={formData:t.shape({name:t.string,sku:t.string,price:t.oneOfType([t.string,t.number]),category:t.string,stockQuantity:t.oneOfType([t.string,t.number]),weight:t.oneOfType([t.string,t.number]),length:t.oneOfType([t.string,t.number]),width:t.oneOfType([t.string,t.number]),height:t.oneOfType([t.string,t.number]),color:t.string,manufacturer:t.string,tags:t.string,size:t.string,status:t.string,description:t.string}).isRequired,handleChange:t.func.isRequired,handleFileChange:t.func.isRequired,handleSubmit:t.func.isRequired,loading:t.bool.isRequired,error:t.string};y.defaultProps={error:""};const H="https://backend-log2.axleshift.com/api/v1/product/create";function ne(){const{accessToken:n}=L(),r=Q(),[a,u]=p.useState({name:"",description:"",price:"",category:"",stockQuantity:"",images:[],status:"Available",sku:"",weight:"",length:"",width:"",height:"",manufacturer:"",tags:"",color:"",size:""}),[h,E]=p.useState(!1),[S,k]=p.useState(""),[T,N]=p.useState("success"),[P,v]=p.useState(!1),F=()=>{const s=a.name?a.name.slice(0,3).toUpperCase():"XXX",o=Math.floor(1e3+Math.random()*9e3);return`${s}${o}`},O=()=>{var m,g;const s=((m=a.name)==null?void 0:m.split(" "))||[],o=((g=a.category)==null?void 0:g.split(" "))||[];return[...new Set([...s,...o])].map(f=>f.toLowerCase()).join(", ")};p.useEffect(()=>{a.name&&!a.sku&&u(s=>({...s,sku:F()})),(a.name||a.category)&&u(s=>({...s,tags:O()}))},[a.name,a.category]);const A=s=>{const{name:o,value:m}=s.target;u(g=>({...g,[o]:m}))},R=s=>{const o=s.target.files?Array.from(s.target.files):[];u(m=>({...m,images:o}))},q=async s=>{var g,f;if(s.preventDefault(),!n)return b("Authentication error. Please log in again.","danger");E(!0);const o=new FormData;for(const i in a)if(i==="images")a.images.forEach(C=>o.append("images",C));else{if(["length","width","height"].includes(i))continue;a[i]&&o.append(i,a[i])}const m=JSON.stringify({length:a.length||0,width:a.width||0,height:a.height||0});o.append("dimensions",m);try{const i={Authorization:`Bearer ${n}`};await B.post(H,o,{headers:i}),b("âœ… Product created successfully!","success"),setTimeout(()=>{r("/procurement/product-catalog")},2e3),u({name:"",description:"",price:"",category:"",stockQuantity:"",images:[],status:"Available",sku:"",weight:"",length:"",width:"",height:"",manufacturer:"",tags:"",color:"",size:""})}catch(i){const C=((f=(g=i.response)==null?void 0:g.data)==null?void 0:f.message)||i.message||"Failed to create product";b(`ðŸš¨ ${C}`,"danger")}finally{E(!1)}},b=(s,o)=>{k(s),N(o),v(!0),setTimeout(()=>v(!1),5e3)};return e.createElement(U,{className:"py-4"},e.createElement(d,{className:"justify-content-center"},e.createElement(l,{md:10,lg:8},e.createElement(I,null,e.createElement(j,{className:"fw-bold"},"Create New Product"),e.createElement(X,null,e.createElement(y,{formData:a,handleChange:A,handleFileChange:R,handleSubmit:q,loading:h}),P&&e.createElement("div",{className:`alert alert-${T} mt-3`,role:"alert"},S))))))}export{ne as default};
