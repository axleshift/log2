import{f as E,r as m,j as e,L as n}from"./index-DIuMn50O.js";import{u as F,c as O}from"./index.esm-CegFSc_L.js";import{C as h}from"./index.esm-C__UGevs.js";import{F as U,d as q,e as G}from"./index-DCnamT6g.js";import{a as g}from"./js.cookie-CRA5wM0A.js";import{C as A,a as i}from"./CContainer-BB4SI4Be.js";import{C as j,a}from"./CRow-ptA_khgd.js";import{C as D}from"./CCardGroup-Cks64lfv.js";import{C as B,a as V}from"./CCardBody-WtYlQYQD.js";import{C as W}from"./CAlert-CpEiJNxq.js";import{C as _}from"./CForm-tcAnQ6iK.js";import{C as f,a as y}from"./CInputGroupText-BQ5MQS7t.js";import{c as $}from"./cil-user-Ddrdy7PS.js";import{C}from"./CFormInput-aTtMhUOR.js";import"./Transition-DtCpV_C4.js";function ne(){const w="undefined/api/v1/auth",{register:p,handleSubmit:N,formState:{errors:o},reset:b}=F(),S=E(),[t,x]=m.useState(!1),[c,l]=m.useState({message:"",type:""}),[u,L]=m.useState(!1),k=async r=>{const s=await fetch(`${w}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok){const d=await s.json();throw new Error(d.message||"Login failed")}return s.json()},P=async r=>{x(!0),l({message:"",type:""});try{const s=await window.grecaptcha.execute(void 0,{action:"login"}),d={username:r.username,password:r.password,recaptchaToken:s},v=await k(d),{accessToken:I,refreshToken:R}=v;g.set("token",I,{expires:1}),g.set("refreshToken",R,{expires:1}),l({message:"Welcome back! Redirecting to your dashboard...",type:"success"}),b(),setTimeout(()=>S("/dashboard"),2e3)}catch(s){l({message:s.message,type:"danger"})}finally{x(!1)}},T=()=>{L(r=>!r)};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(A,{children:e.jsxs(j,{className:"justify-content-center",children:[e.jsxs(a,{md:4,className:"d-flex flex-column align-items-center justify-content-center bg-primary text-white",children:[e.jsx("h2",{children:"Vendor Portal"}),e.jsx("p",{children:"Logistic Management System"}),e.jsx(n,{to:"/",className:"text-white",children:"Landing page →"}),e.jsx(n,{to:"/supplierslogin",className:"text-white",children:"Supplier Login →"})]}),e.jsx(a,{md:5,children:e.jsx(D,{children:e.jsx(B,{className:"p-4",children:e.jsxs(V,{children:[c.message&&e.jsx(W,{color:c.type,dismissible:!0,children:c.message}),e.jsxs(_,{onSubmit:N(P),children:[e.jsx("h1",{children:"Login"}),e.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),e.jsxs(f,{className:"mb-3",children:[e.jsx(y,{children:e.jsx(h,{icon:$})}),e.jsx(C,{type:"text",placeholder:"Username",autoComplete:"username",...p("username",{required:"Username is required"})})]}),o.username&&e.jsx("p",{className:"text-danger",children:o.username.message}),e.jsxs(f,{className:"mb-4",children:[e.jsx(y,{children:e.jsx(h,{icon:O})}),e.jsx(C,{type:u?"text":"password",placeholder:"Password",autoComplete:"current-password",...p("password",{required:"Password is required"})}),e.jsx(i,{color:"secondary",variant:"outline",onClick:T,type:"button",children:e.jsx(U,{icon:u?q:G})})]}),o.password&&e.jsx("p",{className:"text-danger",children:o.password.message}),e.jsxs(j,{children:[e.jsx(a,{sm:5,children:e.jsx(i,{color:"success",variant:"outline",className:"px-4",type:"submit",disabled:t,children:t?"Logging in...":"LOGIN"})}),e.jsx(a,{xs:"auto",className:"me-auto",children:e.jsx(n,{to:"/forgotPass",children:e.jsx(i,{color:"danger",variant:"outline",className:"px-4",disabled:t,children:t?"Processing...":"FORGOT PASSWORD"})})}),e.jsx(a,{xs:4,children:e.jsx(n,{to:"/register",children:e.jsx(i,{color:"link",className:"px-0",children:"Register Now!"})})})]})]})]})})})})]})})})}export{ne as default};
