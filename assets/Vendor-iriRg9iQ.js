import{k as g,r as d,R as t,C as b,L as y}from"./index-DQP8N3_v.js";import{a as R}from"./index-C88pvD_q.js";import{C as w,a as F}from"./CCardBody-DhxhUCKr.js";import{C as T}from"./CCardHeader-aqV2zWI-.js";import{C}from"./CAlert-k6EoeMSe.js";import{C as x,a as N,b as f,c as o,d as v,e as u}from"./CTable-BMBWZ6R4.js";import"./CCloseButton-B0Lgjfr_.js";const A="https://backend-log2.axleshift.com",r=R.create({baseURL:A,withCredentials:!0});r.interceptors.request.use(e=>(e.data instanceof FormData?e.headers["Content-Type"]="multipart/form-data":e.headers["Content-Type"]="application/json",e),e=>Promise.reject(e));r.interceptors.response.use(e=>e,async e=>{var a,s,c;if(console.error("API Error:",((s=(a=e.response)==null?void 0:a.data)==null?void 0:s.message)||e.message),((c=e.response)==null?void 0:c.status)===401)try{return await r.post("/auth/refresh-token"),r(e.config)}catch{console.error("Session expired, redirecting to login..."),window.location.href="/login"}return Promise.reject(e)});const D={get:(e,a,s={})=>r.get(e,{params:a,headers:s}),post:(e,a)=>r.post(e,a),put:(e,a)=>r.put(e,a),delete:e=>r.delete(e)},B=()=>{const{accessToken:e}=g(),[a,s]=d.useState([]),[c,p]=d.useState(!0),[E,h]=d.useState(null);return d.useEffect(()=>{e&&(async()=>{var i,l;try{const m=await D.get("/api/v1/rfq/vendor/rfqs",null,{Authorization:`Bearer ${e}`});s(m.data)}catch(m){console.error("Failed to fetch RFQs:",m),h(((l=(i=m.response)==null?void 0:i.data)==null?void 0:l.message)||"Failed to load RFQs.")}finally{p(!1)}})()},[e]),t.createElement(w,{className:"shadow-sm"},t.createElement(T,{className:"bg-primary text-white fw-bold"},"Your RFQs"),t.createElement(F,null,c?t.createElement("div",{className:"text-center my-3"},t.createElement(b,{color:"primary"})):E?t.createElement(C,{color:"danger",className:"text-center"},E):a.length===0?t.createElement(C,{color:"warning",className:"text-center"},"No RFQs available."):t.createElement(x,{striped:!0,hover:!0,responsive:!0},t.createElement(N,{color:"light"},t.createElement(f,null,t.createElement(o,null,"#"),t.createElement(o,null,"Title"),t.createElement(o,null,"Due Date"),t.createElement(o,null,"Action"))),t.createElement(v,null,a.map((n,i)=>{var l;return t.createElement(f,{key:n._id},t.createElement(o,null,i+1),t.createElement(u,null,((l=n.procurementId)==null?void 0:l.title)||"N/A"),t.createElement(u,null,n.deadline?new Date(n.deadline).toLocaleDateString():"N/A"),t.createElement(u,null,t.createElement(y,{to:`/vendor/rfqs/${n._id}`,className:"btn btn-sm btn-primary"},"View Details")))})))))};export{B as default};
