import{r as c,_ as G,a as o,j as $,F as O,b as N,c as C,P as s,R as e}from"./index-qAjInVaZ.js";import{a as S}from"./index-DW_MHI2K.js";import{C as Q,a as U}from"./CCardBody-DXOvSCcW.js";import{C as Y}from"./CCardHeader-CANAulHu.js";import{C as q,a as J}from"./CInputGroupText-CccDFafo.js";import{C as K}from"./CFormInput-DahtiFNR.js";import{b as j}from"./CContainer-CPP8_u0b.js";import{C as X,a as Z,b as B,c as F,d as _,e as k}from"./CTable-3eKYyPNy.js";import{C as P,b as z}from"./CFormControlWrapper-DILRo1BL.js";import{u as ee}from"./CCloseButton-Bpa28C6a.js";import{e as te,f as ae,g as ne,h as re,j as le}from"./CNavItem-BK7iTdnI.js";var x=c.forwardRef(function(a,y){var f=a.className,r=a.button,b=a.feedback,g=a.feedbackInvalid,u=a.feedbackValid,T=a.floatingLabel,A=a.tooltipFeedback,v=a.hitArea,d=a.id,i=a.indeterminate,R=a.inline,m=a.invalid,h=a.label,D=a.reverse,E=a.type,L=E===void 0?"checkbox":E,t=a.valid,n=G(a,["className","button","feedback","feedbackInvalid","feedbackValid","floatingLabel","tooltipFeedback","hitArea","id","indeterminate","inline","invalid","label","reverse","type","valid"]),l=c.useRef(null),w=ee(y,l);c.useEffect(function(){l.current&&i&&(l.current.indeterminate=i)},[i,l.current]);var p=function(){return o("input",{...N({type:L,className:C(r?"btn-check":"form-check-input",{"is-invalid":m,"is-valid":t,"me-2":v}),id:d},n,{ref:w})})},M=function(){return o(z,{describedby:n["aria-describedby"],feedback:b,feedbackInvalid:g,feedbackValid:u,floatingLabel:T,invalid:m,tooltipFeedback:A,valid:t})},H=function(){var V;return o(P,{...N({customClassName:C(r?C("btn",r.variant?"btn-".concat(r.variant,"-").concat(r.color):"btn-".concat(r.color),(V={},V["btn-".concat(r.size)]=r.size,V),"".concat(r.shape)):"form-check-label")},d&&{htmlFor:d}),children:h})},W=function(){return r?$(O,{children:[o(p,{}),h&&o(H,{}),o(M,{})]}):h?v?$(O,{children:[o(p,{}),o(P,{...N({customClassName:C("form-check-label stretched-link",f)},d&&{htmlFor:d}),children:h}),o(M,{})]}):$("div",{className:C("form-check",{"form-check-inline":R,"form-check-reverse":D,"is-invalid":m,"is-valid":t},f),children:[o(p,{}),o(H,{}),o(M,{})]}):o(p,{})};return o(W,{})});x.propTypes=N({button:s.object,className:s.string,hitArea:s.oneOf(["full"]),id:s.string,indeterminate:s.bool,inline:s.bool,label:s.oneOfType([s.string,s.node]),reverse:s.bool,type:s.oneOf(["checkbox","radio"])},z.propTypes);x.displayName="CFormCheck";const I="https://backend-log2.axleshift.com/api/v1/inventory",ve=()=>{const[a,y]=c.useState(!1),[f,r]=c.useState(new Set),[b,g]=c.useState([]),[u,T]=c.useState(""),[A,v]=c.useState(!1),[d,i]=c.useState(""),[R,m]=c.useState(!1);c.useEffect(()=>{(async()=>{v(!0);try{const n=await S.get(I,{params:{search:u}});Array.isArray(n.data)?g(n.data):i("Unexpected data format received from the server.")}catch(n){i("Error fetching inventory data."),console.error("Error fetching inventory data:",n)}finally{v(!1)}})()},[u]);const h=c.useMemo(()=>b.filter(t=>t.tracking_id.toLowerCase().includes(u.toLowerCase())),[b,u]),D=t=>{const n=t.target.checked;y(n),r(n?new Set(b.map(l=>l.tracking_id)):new Set)},E=(t,n)=>{const l=new Set(f);t.target.checked?l.add(n):l.delete(n),r(l)},L=async()=>{if(f.size===0){i("Please select at least one item to delete.");return}const t=Array.from(f);try{if(t.length===1){const l=t[0];await S.delete(`${I}/${l}`)}else await S.delete(`${I}/bulk-delete`,{data:{ids:t}});i("Selected items deleted successfully."),r(new Set),y(!1);const n=await S.get(I);g(n.data),m(!1)}catch{i("Error deleting selected items.")}};return e.createElement(Q,null,e.createElement(Y,{as:"h5",style:{textAlign:"center",padding:"1rem"}},"Warehouse Inventory"),e.createElement(U,null,d&&e.createElement("div",{className:"alert alert-info"},d),e.createElement("div",{className:"d-flex justify-content-between align-items-center mb-4"},e.createElement(q,{style:{maxWidth:"400px",width:"100%"}},e.createElement(J,null,"Search"),e.createElement(K,{type:"text",placeholder:"Search by Tracking ID",value:u,onChange:t=>T(t.target.value)})),e.createElement("div",{className:"d-flex"},e.createElement(j,{color:"danger",shape:"rounded-0",onClick:()=>m(!0)},"Delete"))),A?e.createElement("div",null,"Loading..."):e.createElement(X,{striped:!0,hover:!0,responsive:!0},e.createElement(Z,null,e.createElement(B,null,e.createElement(F,{scope:"col"},e.createElement(x,{id:"selectAll",checked:a,onChange:D})),e.createElement(F,{scope:"col"},"Tracking ID"),e.createElement(F,{scope:"col"},"Description"),e.createElement(F,{scope:"col"},"Warehouse Location"))),e.createElement(_,null,h.length>0?h.map((t,n)=>{var l,w;return e.createElement(B,{key:`${t.tracking_id}-${n}`},e.createElement(k,null,e.createElement(x,{id:`row${t.tracking_id}`,checked:f.has(t.tracking_id),onChange:p=>E(p,t.tracking_id)})),e.createElement(k,null,t.tracking_id),e.createElement(k,null,((l=t.shipment)==null?void 0:l.shipment_description)||"No description"),e.createElement(k,null,((w=t.warehouse)==null?void 0:w.warehouse)||"No warehouse location available"))}):e.createElement(B,null,e.createElement(k,{colSpan:"4",style:{textAlign:"center"}},"No inventory records found."))))),e.createElement(te,{visible:R,onClose:()=>m(!1)},e.createElement(ae,null,e.createElement(ne,null,"Confirm Delete")),e.createElement(re,null,"Are you sure you want to delete the selected item(s)?"),e.createElement(le,null,e.createElement(j,{color:"secondary",onClick:()=>m(!1)},"Cancel"),e.createElement(j,{color:"danger",onClick:L},"Delete"))))};export{ve as default};
