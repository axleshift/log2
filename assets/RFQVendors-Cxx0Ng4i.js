import{y as Q,r as a,R as e,P as F,i as C}from"./index-CVXZKmLB.js";import{a as f}from"./index-DW_MHI2K.js";import{C as q,a as S}from"./CCardBody-Dgfl31BA.js";import{C as D}from"./CCardHeader-kl5Q3YQb.js";import{b as x}from"./CContainer-CUBQWJe-.js";const p="https://backend-log2.axleshift.com/api/v1/rfq",v=({vendorId:n})=>{const{id:o}=Q(),[i,E]=a.useState(null),[u,g]=a.useState(""),[c,b]=a.useState(""),[m,y]=a.useState(""),[d,R]=a.useState(!1);a.useEffect(()=>{if(!o){console.error("RFQ ID is missing.");return}(async()=>{try{console.log("Fetching RFQ with ID:",o);const t=await f.get(`${p}/${o}`);console.log("RFQ Details Response:",t.data),E(t.data),t.data.vendors&&Array.isArray(t.data.vendors)?t.data.vendors.some(s=>s._id===n)&&R(!0):console.error("Vendors field is missing or not an array.")}catch(t){console.error("Error fetching RFQ details:",t)}})()},[o,n]);const h=async r=>{var t,s;if(r.preventDefault(),!d){alert("You are not invited to submit a quote for this RFQ.");return}try{const l=await f.post(`${p}/${o}/submit-quotes`,{vendor:n,price:u,deliveryTime:c,additionalNotes:m});alert(l.data.message)}catch(l){console.error("Error submitting quote:",l),alert(((s=(t=l.response)==null?void 0:t.data)==null?void 0:s.error)||"Error submitting quote.")}};return i?d?e.createElement("div",null,e.createElement("h3",null,"Submit a Quote for ",i.title),e.createElement("form",{onSubmit:h},e.createElement("div",null,e.createElement("label",null,"Price:"),e.createElement("input",{type:"number",value:u,onChange:r=>g(r.target.value),required:!0})),e.createElement("div",null,e.createElement("label",null,"Delivery Time:"),e.createElement("input",{type:"text",value:c,onChange:r=>b(r.target.value),required:!0})),e.createElement("div",null,e.createElement("label",null,"Additional Notes:"),e.createElement("textarea",{value:m,onChange:r=>y(r.target.value)})),e.createElement("button",{type:"submit"},"Submit Quote"))):e.createElement("div",null,"You are not invited to submit a quote for this RFQ."):e.createElement("div",null,"Loading RFQ details...")};v.propTypes={vendorId:F.string.isRequired};const T=()=>{const n=C();return e.createElement("div",null,e.createElement(q,null,e.createElement(D,{className:"d-flex justify-content-between align-items-center"},e.createElement("h5",null,"RFQ Vendors Management"),e.createElement(x,{color:"primary",onClick:()=>n("/procurement/rfqs")},"View RFQs")),e.createElement(S,null,e.createElement(v,null))))};export{T as default};
