import{r as c,_ as G,a as o,j as $,F as O,b as N,c as v,P as s,R as e}from"./index-BtAkPo-w.js";import{a as S}from"./index-C88pvD_q.js";import{C as Q,a as U}from"./CCardBody-Byp6WMg9.js";import{C as Y}from"./CCardHeader-Dr_K9ax5.js";import{C as q,a as J}from"./CInputGroupText-Cb26fHKn.js";import{C as K}from"./CFormInput-LSJBuiIF.js";import{b as j}from"./CContainer-DwM_1KJX.js";import{C as X,a as Z,b as B,c as F,d as _,e as k}from"./CTable-DT5XHXd0.js";import{C as P,a as z}from"./CFormControlWrapper-BshqQMlF.js";import{u as ee}from"./CCloseButton-BO5fzbAE.js";import{C as te,a as ae,b as re,c as ne}from"./CModalHeader-L7C3lAty.js";import{C as le}from"./CModalTitle-XWz34GAr.js";import"./CNavItem-CT0enLx-.js";var x=c.forwardRef(function(a,y){var f=a.className,n=a.button,b=a.feedback,g=a.feedbackInvalid,u=a.feedbackValid,T=a.floatingLabel,A=a.tooltipFeedback,C=a.hitArea,d=a.id,i=a.indeterminate,R=a.inline,m=a.invalid,h=a.label,D=a.reverse,E=a.type,L=E===void 0?"checkbox":E,t=a.valid,r=G(a,["className","button","feedback","feedbackInvalid","feedbackValid","floatingLabel","tooltipFeedback","hitArea","id","indeterminate","inline","invalid","label","reverse","type","valid"]),l=c.useRef(null),w=ee(y,l);c.useEffect(function(){l.current&&i&&(l.current.indeterminate=i)},[i,l.current]);var p=function(){return o("input",{...N({type:L,className:v(n?"btn-check":"form-check-input",{"is-invalid":m,"is-valid":t,"me-2":C}),id:d},r,{ref:w})})},M=function(){return o(z,{describedby:r["aria-describedby"],feedback:b,feedbackInvalid:g,feedbackValid:u,floatingLabel:T,invalid:m,tooltipFeedback:A,valid:t})},H=function(){var V;return o(P,{...N({customClassName:v(n?v("btn",n.variant?"btn-".concat(n.variant,"-").concat(n.color):"btn-".concat(n.color),(V={},V["btn-".concat(n.size)]=n.size,V),"".concat(n.shape)):"form-check-label")},d&&{htmlFor:d}),children:h})},W=function(){return n?$(O,{children:[o(p,{}),h&&o(H,{}),o(M,{})]}):h?C?$(O,{children:[o(p,{}),o(P,{...N({customClassName:v("form-check-label stretched-link",f)},d&&{htmlFor:d}),children:h}),o(M,{})]}):$("div",{className:v("form-check",{"form-check-inline":R,"form-check-reverse":D,"is-invalid":m,"is-valid":t},f),children:[o(p,{}),o(H,{}),o(M,{})]}):o(p,{})};return o(W,{})});x.propTypes=N({button:s.object,className:s.string,hitArea:s.oneOf(["full"]),id:s.string,indeterminate:s.bool,inline:s.bool,label:s.oneOfType([s.string,s.node]),reverse:s.bool,type:s.oneOf(["checkbox","radio"])},z.propTypes);x.displayName="CFormCheck";const I="https://backend-log2.axleshift.com/api/v1/inventory",ke=()=>{const[a,y]=c.useState(!1),[f,n]=c.useState(new Set),[b,g]=c.useState([]),[u,T]=c.useState(""),[A,C]=c.useState(!1),[d,i]=c.useState(""),[R,m]=c.useState(!1);c.useEffect(()=>{(async()=>{C(!0);try{const r=await S.get(I,{params:{search:u}});Array.isArray(r.data)?g(r.data):i("Unexpected data format received from the server.")}catch(r){i("Error fetching inventory data."),console.error("Error fetching inventory data:",r)}finally{C(!1)}})()},[u]);const h=c.useMemo(()=>b.filter(t=>t.tracking_id.toLowerCase().includes(u.toLowerCase())),[b,u]),D=t=>{const r=t.target.checked;y(r),n(r?new Set(b.map(l=>l.tracking_id)):new Set)},E=(t,r)=>{const l=new Set(f);t.target.checked?l.add(r):l.delete(r),n(l)},L=async()=>{if(f.size===0){i("Please select at least one item to delete.");return}const t=Array.from(f);try{if(t.length===1){const l=t[0];await S.delete(`${I}/${l}`)}else await S.delete(`${I}/bulk-delete`,{data:{ids:t}});i("Selected items deleted successfully."),n(new Set),y(!1);const r=await S.get(I);g(r.data),m(!1)}catch{i("Error deleting selected items.")}};return e.createElement(Q,null,e.createElement(Y,{as:"h5",style:{textAlign:"center",padding:"1rem"}},"Warehouse Inventory"),e.createElement(U,null,d&&e.createElement("div",{className:"alert alert-info"},d),e.createElement("div",{className:"d-flex justify-content-between align-items-center mb-4"},e.createElement(q,{style:{maxWidth:"400px",width:"100%"}},e.createElement(J,null,"Search"),e.createElement(K,{type:"text",placeholder:"Search by Tracking ID",value:u,onChange:t=>T(t.target.value)})),e.createElement("div",{className:"d-flex"},e.createElement(j,{color:"danger",shape:"rounded-0",onClick:()=>m(!0)},"Delete"))),A?e.createElement("div",null,"Loading..."):e.createElement(X,{striped:!0,hover:!0,responsive:!0},e.createElement(Z,null,e.createElement(B,null,e.createElement(F,{scope:"col"},e.createElement(x,{id:"selectAll",checked:a,onChange:D})),e.createElement(F,{scope:"col"},"Tracking ID"),e.createElement(F,{scope:"col"},"Description"),e.createElement(F,{scope:"col"},"Warehouse Location"))),e.createElement(_,null,h.length>0?h.map((t,r)=>{var l,w;return e.createElement(B,{key:`${t.tracking_id}-${r}`},e.createElement(k,null,e.createElement(x,{id:`row${t.tracking_id}`,checked:f.has(t.tracking_id),onChange:p=>E(p,t.tracking_id)})),e.createElement(k,null,t.tracking_id),e.createElement(k,null,((l=t.shipment)==null?void 0:l.shipment_description)||"No description"),e.createElement(k,null,((w=t.warehouse)==null?void 0:w.warehouse)||"No warehouse location available"))}):e.createElement(B,null,e.createElement(k,{colSpan:"4",style:{textAlign:"center"}},"No inventory records found."))))),e.createElement(te,{visible:R,onClose:()=>m(!1)},e.createElement(ae,null,e.createElement(le,null,"Confirm Delete")),e.createElement(re,null,"Are you sure you want to delete the selected item(s)?"),e.createElement(ne,null,e.createElement(j,{color:"secondary",onClick:()=>m(!1)},"Cancel"),e.createElement(j,{color:"danger",onClick:L},"Delete"))))};export{ke as default};
