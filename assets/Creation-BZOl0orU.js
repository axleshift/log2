import{R as e,C as $,P as t,u as x,n as M,r as p}from"./index-Czk1en48.js";import{C as Q}from"./CForm-DpxG6y2y.js";import{C as U}from"./CAlert-DUOQnrT6.js";import{a as d,b as l,c as W,d as j}from"./CRow-COWDqcej.js";import{a as i}from"./CFormInput-BMJoeGH4.js";import{C as v}from"./CFormSelect-DbfrKTkb.js";import{C as B}from"./CFormTextarea-CbFIJlat.js";import{a as I}from"./index-xsH4HHeE.js";import{C as X,a as H}from"./CCardBody-Fly4LOGC.js";import{C as K}from"./CCardHeader-DYgh3k3A.js";import"./CCloseButton-jv1sHiMY.js";function w({formData:n,handleChange:r,handleFileChange:a,handleSubmit:g,loading:f,error:E=""}){return e.createElement(Q,{onSubmit:g},E&&e.createElement(U,{color:"danger"},E),e.createElement(d,{className:"mb-3"},e.createElement(l,{md:6},e.createElement(i,{name:"name",label:"Product Name",value:n.name||"",onChange:r,required:!0})),e.createElement(l,{md:6},e.createElement(i,{name:"sku",label:"SKU",value:n.sku||"",onChange:r,disabled:!0}))),e.createElement(d,{className:"mb-3"},e.createElement(l,{md:6},e.createElement(i,{name:"price",type:"number",label:"Price",value:n.price||"",onChange:r,required:!0})),e.createElement(l,{md:6},e.createElement(i,{name:"stockQuantity",type:"number",label:"Stock Quantity",value:n.stockQuantity||"",onChange:r}))),e.createElement(d,{className:"mb-3"},e.createElement(l,{md:6},e.createElement(v,{name:"category",label:"Category",value:n.category||"",onChange:r,required:!0},e.createElement("option",{value:""},"Select Category"),e.createElement("option",{value:"Electronics"},"Electronics"),e.createElement("option",{value:"Clothing"},"Clothing"),e.createElement("option",{value:"Furniture"},"Furniture"),e.createElement("option",{value:"Logistics"},"Logistics"),e.createElement("option",{value:"Office Supplies"},"Office Supplies"))),e.createElement(l,{md:6},e.createElement(v,{name:"status",label:"Status",value:n.status||"",onChange:r},e.createElement("option",{value:"Available"},"Available"),e.createElement("option",{value:"Out of Stock"},"Out of Stock"),e.createElement("option",{value:"Discontinued"},"Discontinued")))),e.createElement(B,{name:"description",label:"Description",rows:3,value:n.description||"",onChange:r,className:"mb-3",required:!0}),e.createElement(d,{className:"mb-3"},e.createElement(l,{md:3},e.createElement(i,{name:"length",label:"Length (cm)",type:"number",value:n.length||"",onChange:r})),e.createElement(l,{md:3},e.createElement(i,{name:"width",label:"Width (cm)",type:"number",value:n.width||"",onChange:r})),e.createElement(l,{md:3},e.createElement(i,{name:"height",type:"number",label:"Height (cm)",value:n.height||"",onChange:r})),e.createElement(l,{md:3},e.createElement(i,{name:"weight",type:"number",label:"Weight (kg)",value:n.weight||"",onChange:r}))),e.createElement(d,{className:"mb-3"},e.createElement(l,{md:6},e.createElement(i,{name:"manufacturer",label:"Manufacturer",value:n.manufacturer||"",onChange:r})),e.createElement(l,{md:3},e.createElement(i,{name:"color",label:"Color",value:n.color||"",onChange:r})),e.createElement(l,{md:3},e.createElement(i,{name:"size",label:"Size",value:n.size||"",onChange:r}))),e.createElement(i,{name:"tags",label:"Tags (comma-separated)",value:n.tags||"",onChange:r,className:"mb-3"}),e.createElement(i,{name:"images",type:"file",label:"Product Images",multiple:!0,onChange:a,className:"mb-4"}),e.createElement(W,{color:"success",type:"submit",disabled:f},f?e.createElement($,{size:"sm"}):"Create Product"))}w.propTypes={formData:t.shape({name:t.string,sku:t.string,price:t.oneOfType([t.string,t.number]),category:t.string,stockQuantity:t.oneOfType([t.string,t.number]),weight:t.oneOfType([t.string,t.number]),length:t.oneOfType([t.string,t.number]),width:t.oneOfType([t.string,t.number]),height:t.oneOfType([t.string,t.number]),color:t.string,manufacturer:t.string,tags:t.string,size:t.string,status:t.string,description:t.string}).isRequired,handleChange:t.func.isRequired,handleFileChange:t.func.isRequired,handleSubmit:t.func.isRequired,loading:t.bool.isRequired,error:t.string};const V="https://backend-log2.axleshift.com/api/v1/product/create",S={name:"",description:"",price:"",category:"",stockQuantity:"",images:[],status:"Available",sku:"",weight:"",length:"",width:"",height:"",manufacturer:"",tags:"",color:"",size:""};function se(){const{accessToken:n}=x(),r=M(),[a,g]=p.useState(S),[f,E]=p.useState(!1),[T,k]=p.useState(""),[N,P]=p.useState("success"),[F,C]=p.useState(!1),O=()=>{const s=a.name?a.name.slice(0,3).toUpperCase():"XXX",o=Math.floor(1e3+Math.random()*9e3);return`${s}${o}`},q=()=>{var m,u;const s=((m=a.name)==null?void 0:m.split(" "))||[],o=((u=a.category)==null?void 0:u.split(" "))||[];return[...new Set([...s,...o])].map(h=>h.toLowerCase()).join(", ")};p.useEffect(()=>{const s={};a.name&&!a.sku&&(s.sku=O()),(a.name||a.category)&&(s.tags=q()),Object.keys(s).length>0&&g(o=>({...o,...s}))},[a.name,a.category]);const R=s=>{const{name:o,value:m}=s.target;g(u=>({...u,[o]:m}))},A=s=>{const o=s.target.files?Array.from(s.target.files):[];g(m=>({...m,images:o}))},z=()=>!a.name||!a.price||!a.category?(b("Please fill in all required fields: Name, Price, Category.","warning"),!1):!0,L=async s=>{var u,h;if(s.preventDefault(),!n)return b("Authentication error. Please log in again.","danger");if(!z())return;E(!0);const o=new FormData;for(const c in a)if(c==="images")a.images.length>0&&a.images.forEach(y=>o.append("images",y));else{if(["length","width","height"].includes(c))continue;a[c]&&o.append(c,a[c])}const m=JSON.stringify({length:a.length||0,width:a.width||0,height:a.height||0});o.append("dimensions",m);try{const c={Authorization:`Bearer ${n}`};await I.post(V,o,{headers:c}),b("âœ… Product created successfully!","success"),setTimeout(()=>r("/procurement/product-catalog"),2e3),g(S)}catch(c){const y=((h=(u=c.response)==null?void 0:u.data)==null?void 0:h.message)||c.message||"Failed to create product";b(`ðŸš¨ ${y}`,"danger")}finally{E(!1)}},b=(s,o)=>{k(s),P(o),C(!0),setTimeout(()=>C(!1),5e3)};return e.createElement(j,{className:"py-4"},e.createElement(d,{className:"justify-content-center"},e.createElement(l,{md:10,lg:8},e.createElement(X,null,e.createElement(K,{className:"fw-bold"},"Create New Product"),e.createElement(H,null,e.createElement(w,{formData:a,handleChange:R,handleFileChange:A,handleSubmit:L,loading:f}),F&&e.createElement("div",{className:`alert alert-${N} mt-3`,role:"alert"},T))))))}export{se as default};
