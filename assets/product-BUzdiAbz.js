import{r as a,h as $,j as e,C as w,x as D}from"./index-B9rQ-kmE.js";import{a as C,b as I}from"./CContainer-DdWdpS7d.js";import{C as p,a as m}from"./CRow-BN1XSdcy.js";import{C as b}from"./CAlert-Bbgy1ZOu.js";import{C as f,a as g}from"./CCardBody-Dywmzwhl.js";import{C as S}from"./CCardHeader-C6ZKMTzh.js";import{C as F}from"./CNav-D5Jy_q-l.js";import{l as P,m as v}from"./CNavItem-DMaIUZz7.js";import{C as T,a as y}from"./CTabPane-D7Jigavr.js";import"./CCloseButton-r9Y6HIOX.js";const _="https://backend-log2.axleshift.com/api/v1/product";function U(){const[n,r]=a.useState([]),[l,o]=a.useState([]),[i,d]=a.useState(""),[h,u]=a.useState("All"),[c,j]=a.useState([0,1e3]),[k,A]=a.useState(!0),[N,E]=a.useState(null);return $(),a.useEffect(()=>{async function s(){try{const t=await fetch(_);if(!t.ok)throw new Error("Failed to fetch products");const x=await t.json();r(x),o(x)}catch(t){E(t.message)}finally{A(!1)}}s()},[]),a.useEffect(()=>{let s=n.filter(t=>{const x=h==="All"||t.category===h,L=t.unitPrice>=c[0]&&t.unitPrice<=c[1],R=t.itemName&&t.itemName.toLowerCase().includes(i.toLowerCase())||t.description&&t.description.toLowerCase().includes(i.toLowerCase());return x&&L&&R});o(s)},[i,h,c,n]),e.jsxs(C,{className:"py-4",children:[e.jsx("h2",{className:"fw-bold text-center pb-4",children:"Product Catalog"}),e.jsxs(p,{className:"mb-4",children:[e.jsx(m,{md:4,children:e.jsx("input",{type:"text",placeholder:"Search by name or description",value:i,onChange:s=>d(s.target.value),className:"form-control"})}),e.jsx(m,{md:4,children:e.jsxs("select",{value:h,onChange:s=>u(s.target.value),className:"form-control",children:[e.jsx("option",{value:"All",children:"All Categories"}),e.jsx("option",{value:"Electronics",children:"Electronics"}),e.jsx("option",{value:"Footwear",children:"Footwear"}),e.jsx("option",{value:"Apparel",children:"Apparel"})]})}),e.jsxs(m,{md:4,children:[e.jsxs("label",{children:["Price Range: $",c[0]," - $",c[1]]}),e.jsx("input",{type:"range",min:"0",max:"1000",value:c[1],onChange:s=>j([0,parseInt(s.target.value)]),className:"form-range"})]})]}),N&&e.jsx(b,{color:"danger",children:N}),k?e.jsxs("div",{className:"text-center",children:[e.jsx(w,{color:"primary",size:"sm"}),e.jsx("p",{className:"mt-2",children:"Loading products..."})]}):e.jsx(p,{className:"g-4",children:l.length===0?e.jsx("p",{className:"text-center",children:"No products found."}):l.map(s=>{var t;return e.jsx(m,{md:4,children:e.jsxs(f,{className:"shadow-sm",children:[e.jsx(S,{className:"fw-bold",children:s.itemName}),e.jsxs(g,{children:[e.jsx("p",{className:"text-muted",children:s.description||"No description available."}),e.jsxs("p",{className:"small",children:[e.jsx("strong",{children:"Category:"})," ",s.category||"Uncategorized"]}),e.jsxs("p",{className:"small",children:[e.jsx("strong",{children:"Price:"})," $",s.unitPrice?Number(s.unitPrice).toFixed(2):"0.00"]}),e.jsxs("p",{className:"small",children:[e.jsx("strong",{children:"Stock:"})," ",s.stockQuantity??"N/A"]}),e.jsxs("p",{className:"small",children:[e.jsx("strong",{children:"Vendor:"})," ",((t=s.vendorId)==null?void 0:t.name)||"N/A"]}),e.jsx(I,{color:"primary",className:"mt-2",onClick:()=>onViewDetails(s._id),children:"View Details"})]})]})},s._id)})})]})}const V="https://backend-log2.axleshift.com/api/v1/product";function Q(){const{id:n}=D(),[r,l]=a.useState(null),[o,i]=a.useState(!0),[d,h]=a.useState(null);return a.useEffect(()=>{async function u(){try{const c=await fetch(`${V}/${n}`);if(!c.ok)throw new Error("Failed to fetch product details");const j=await c.json();l(j)}catch(c){h(c.message)}finally{i(!1)}}u()},[n]),o?e.jsx(w,{}):d?e.jsx(b,{color:"danger",children:d}):e.jsx(C,{children:e.jsxs(f,{children:[e.jsx(S,{children:r.itemName}),e.jsxs(g,{children:[e.jsx("p",{children:r.description}),e.jsxs("p",{children:[e.jsx("strong",{children:"Category:"})," ",r.category]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Price:"})," $",r.unitPrice]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Stock:"})," ",r.stockQuantity]})]})]})})}function X(){const[n,r]=a.useState(1),[l,o]=a.useState(null),i=d=>{o(d),r(2)};return e.jsx(C,{className:"py-4",children:e.jsx(p,{children:e.jsx(m,{children:e.jsx(f,{className:"shadow-sm",children:e.jsxs(g,{children:[e.jsx("h1",{className:"text-2xl fw-bold pb-3",children:"Product Page"}),e.jsxs(F,{variant:"tabs",role:"tablist",children:[e.jsx(P,{children:e.jsx(v,{active:n===1,onClick:()=>r(1),children:"Product Catalog"})}),e.jsx(P,{children:e.jsx(v,{active:n===2,onClick:()=>r(2),children:"Product Details"})})]}),e.jsxs(T,{children:[e.jsx(y,{role:"tabpanel",visible:n===1,children:e.jsx(U,{onViewDetails:i})}),e.jsx(y,{role:"tabpanel",visible:n===2,children:l?e.jsx(Q,{productId:l}):e.jsx("p",{children:"Select a product to view details."})})]})]})})})})})}export{X as default};
