import{r as s,l as v,R as e,C as b}from"./index-CIfsK46L.js";import{a as y}from"./index-t--hEgTQ.js";import{d as h,c as p,a as w,b as x}from"./CRow-BVzRA2UY.js";import{C as R}from"./CAlert-BXe12IPx.js";import{f as N,g as Q,h as f,j as u,k as S,l as c}from"./CTable-BorC14A3.js";import{C as A,a as D}from"./CCardBody-DRNfXEF2.js";import{C as T}from"./CCardHeader-7dXI0fGS.js";import"./CCloseButton-IFEfzM7r.js";const k=()=>{const[l,o]=s.useState([]),[i,E]=s.useState(!0),[m,r]=s.useState(null),[C,g]=s.useState(null),F=v();s.useEffect(()=>{(async()=>{var n,d;try{const a=await y.get("https://backend-log2.axleshift.com/api/v1/rfq");a.data&&Array.isArray(a.data.rfqs)?o(a.data.rfqs):Array.isArray(a.data)?o(a.data):(r("Unexpected API response format"),o([]))}catch(a){r(((d=(n=a.response)==null?void 0:n.data)==null?void 0:d.message)||"Failed to fetch RFQs")}finally{E(!1)}})()},[]);const L=async t=>{var n,d;if(window.confirm("Are you sure you want to delete this RFQ?")){g(t);try{await y.delete(`https://backend-log2.axleshift.com/api/v1/rfq/${t}`),o(l.filter(a=>a._id!==t))}catch(a){alert(((d=(n=a.response)==null?void 0:n.data)==null?void 0:d.message)||"Failed to delete RFQ")}finally{g(null)}}};return e.createElement(h,{className:"mt-4"},e.createElement("h2",{className:"mb-4"},"RFQ List"),i&&e.createElement(b,{color:"primary"}),m&&e.createElement(R,{color:"danger"},m),!i&&!m&&e.createElement(N,{hover:!0,responsive:!0,striped:!0,borderColor:"secondary"},e.createElement(Q,{color:"dark"},e.createElement(f,null,e.createElement(u,null,"RFQ ID"),e.createElement(u,null,"Procurement"),e.createElement(u,null,"Deadline"),e.createElement(u,null,"Status"),e.createElement(u,null,"Actions"))),e.createElement(S,null,l.length>0?l.map(t=>{var n;return e.createElement(f,{key:t._id},e.createElement(c,null,t._id),e.createElement(c,null,((n=t.procurementId)==null?void 0:n.title)||"N/A"),e.createElement(c,null,t.deadline?new Date(t.deadline).toLocaleDateString():"No Deadline"),e.createElement(c,null,t.status||"Pending"),e.createElement(c,null,e.createElement(p,{color:"primary",size:"sm",className:"me-2",onClick:()=>F(`/procurement/rfq/${t._id}`)},"View"),e.createElement(p,{color:"danger",size:"sm",onClick:()=>L(t._id),disabled:C===t._id},C===t._id?"Deleting...":"Delete")))}):e.createElement(f,null,e.createElement(c,{colSpan:"5",className:"text-center"},"No RFQs found")))))},j=()=>{const[l,o]=s.useState("rfqList"),[i,E]=s.useState(!1),m=r=>{o(r),E(!0),setTimeout(()=>E(!1),1e3)};return e.createElement(h,null,e.createElement(w,{className:"mb-3"},e.createElement(x,null,e.createElement(A,null,e.createElement(T,{className:"d-flex justify-content-between align-items-center"},e.createElement("div",null,e.createElement(p,{color:l==="rfqList"?"primary":"secondary",onClick:()=>m("rfqList"),className:"ms-2",active:l==="rfqList",style:{transition:"all 0.3s ease",boxShadow:l==="rfqList"?"0 4px 6px rgba(0, 0, 0, 0.1)":"none"},onMouseOver:r=>r.target.style.transform="scale(1.05)",onMouseOut:r=>r.target.style.transform="scale(1)"},"RFQ List")),e.createElement("div",null,i&&e.createElement(b,{color:"primary"}))),e.createElement(D,null,i?e.createElement(R,{color:"info"},"Loading data..."):e.createElement(e.Fragment,null,l==="rfqList"&&e.createElement(k,null)))))))};export{j as default};
