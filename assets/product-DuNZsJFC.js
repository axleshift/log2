import{r,n as V,R as e,C as _}from"./index-C74fVr_j.js";import{d as w,a as g,b as n,c as v}from"./CRow-pZ4Nb1CN.js";import{C as B}from"./CAlert-DipqDLY2.js";import{C as S,a as x}from"./CCardBody-BDaIJMMP.js";import{C as Q}from"./CCardHeader-Dgo3dG69.js";import{C as U,a as j,b as $}from"./CTabPane-NCyaYlp7.js";import{s as q,t as z}from"./CTable-BY_p2nDh.js";import"./CCloseButton-DUj-QUCI.js";const H="https://backend-log2.axleshift.com/api/v1/product";function O(){const[s,i]=r.useState([]),[p,u]=r.useState([]),[o,C]=r.useState(""),[d,k]=r.useState("All"),[c,h]=r.useState([0,2e4]),[A,R]=r.useState([]),[F,L]=r.useState(!0),[N,D]=r.useState(null),y=V();r.useEffect(()=>{async function t(){try{const l=await fetch(H);if(!l.ok)throw new Error("Failed to fetch products");const a=await l.json();i(a),u(a);const f=["All",...new Set(a.map(m=>m.category).filter(Boolean))];R(f);const E=Math.max(...a.map(m=>parseFloat(m.price||0)),2e4);h([0,E])}catch(l){D(l.message)}finally{L(!1)}}t()},[]),r.useEffect(()=>{const t=o.toLowerCase(),l=s.filter(a=>{var P,b;const f=d==="All"||a.category===d,E=parseFloat(a.price||0),m=E>=c[0]&&E<=c[1],M=!t||((P=a.name)==null?void 0:P.toLowerCase().includes(t))||((b=a.description)==null?void 0:b.toLowerCase().includes(t));return f&&m&&M});u(l)},[o,d,c,s]);const T=t=>y(`/procurement/product/${t}`),I=()=>y("/procurement/product/new");return e.createElement(w,{className:"py-4"},e.createElement(g,{className:"align-items-center mb-4"},e.createElement(n,{md:8},e.createElement("h2",{className:"fw-bold"},"Product Catalog")),e.createElement(n,{md:4,className:"text-end"},e.createElement(v,{color:"success",onClick:I},"+ Add Product"))),e.createElement(g,{className:"mb-4"},e.createElement(n,{md:4},e.createElement("input",{type:"text",placeholder:"Search...",value:o,onChange:t=>C(t.target.value),className:"form-control"})),e.createElement(n,{md:4},e.createElement("select",{value:d,onChange:t=>k(t.target.value),className:"form-control"},A.map(t=>e.createElement("option",{key:t,value:t},t)))),e.createElement(n,{md:4},e.createElement("label",null,"Price Range: ",c[0]," - ",c[1]),e.createElement("input",{type:"range",min:"0",max:c[1],value:c[1],onChange:t=>h([0,Number(t.target.value)]),className:"form-range"}))),N&&e.createElement(B,{color:"danger"},N),F?e.createElement("div",{className:"text-center"},e.createElement(_,{color:"primary"}),e.createElement("p",null,"Loading products...")):e.createElement(g,{className:"g-4"},p.length===0?e.createElement("p",{className:"text-center"},"No products found."):p.map(t=>{var l,a;return e.createElement(n,{key:t._id,md:4},e.createElement(S,{className:"shadow-sm"},((l=t.images)==null?void 0:l.length)>0&&e.createElement("img",{src:t.images[0],alt:t.name,className:"card-img-top",style:{height:"180px",objectFit:"cover"}}),e.createElement(Q,{className:"fw-bold"},t.name),e.createElement(x,null,e.createElement("p",{className:"text-muted"},(a=t.description)==null?void 0:a.slice(0,60),"..."),e.createElement("p",null,e.createElement("strong",null,"Category:")," ",t.category||"Uncategorized"),e.createElement("p",null,e.createElement("strong",null,"Price:")," ",parseFloat(t.price||0).toFixed(2)),e.createElement("p",null,e.createElement("strong",null,"Stock:")," ",t.stockQuantity??"N/A"),e.createElement(v,{color:"primary",onClick:()=>T(t._id)},"View Details"))))})))}function te(){const[s,i]=r.useState(1),[p,u]=r.useState(null),o=C=>{u(C),i(2)};return e.createElement(w,{className:"py-4"},e.createElement(g,null,e.createElement(n,null,e.createElement(S,{className:"shadow-sm"},e.createElement(x,null,e.createElement("h1",{className:"text-2xl fw-bold pb-3"},"Product Page"),e.createElement(U,{variant:"tabs",role:"tablist"},e.createElement(q,null,e.createElement(z,{active:s===1,onClick:()=>i(1)},"Product Catalog"))),e.createElement(j,null,e.createElement($,{role:"tabpanel",visible:s===1},e.createElement(O,{onViewDetails:o}))))))))}export{te as default};
