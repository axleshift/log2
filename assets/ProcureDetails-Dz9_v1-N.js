import{y as S,i as b,r as u,R as e,C as N}from"./index-qAjInVaZ.js";import{a as q}from"./index-DW_MHI2K.js";import{C as w,a as I}from"./CCardBody-DXOvSCcW.js";import{C as T}from"./CCardHeader-CANAulHu.js";import{b as A}from"./CContainer-CPP8_u0b.js";import{C as B}from"./DefaultLayout-DYyF2Ohc.js";import{C,a as P,b as c,c as n,d as y,e as r}from"./CTable-3eKYyPNy.js";import"./index.esm-mM2Os4KS.js";import"./CNavItem-BK7iTdnI.js";import"./CCloseButton-Bpa28C6a.js";import"./cil-user-Ddrdy7PS.js";import"./CForm-BC9QhIXx.js";import"./CFormTextarea-2DZZG0GA.js";import"./CFormControlWrapper-DILRo1BL.js";import"./index-D2wmCYDT.js";const k="https://backend-log2.axleshift.com/api/v1/procurement",J=()=>{var p,h,f,g;const{id:o}=S(),D=b(),[t,v]=u.useState(null),[R,s]=u.useState(!0),[E,d]=u.useState(null);return u.useEffect(()=>{(async()=>{var a,m;if(!o){d("Invalid Procurement ID"),s(!1);return}try{s(!0);const i=await q.get(`${k}/${o}`);v(i.data)}catch(i){d(((m=(a=i.response)==null?void 0:a.data)==null?void 0:m.message)||"Failed to load Procurement")}finally{s(!1)}})()},[o]),R?e.createElement(N,{color:"primary"}):E?e.createElement("div",null,E):t?e.createElement(w,null,e.createElement(T,null,e.createElement("h5",null,"Procurement Details"),e.createElement(A,{color:"secondary",onClick:()=>D(-1)},"Back to Procurement List")),e.createElement(I,null,e.createElement("h6",null,e.createElement("strong",null,"Procurement ID:")," ",t._id),e.createElement("h6",null,e.createElement("strong",null,"Title:")," ",t.title),e.createElement("h6",null,e.createElement("strong",null,"Description:")," ",t.description||"No description available"),e.createElement("h6",null,e.createElement("strong",null,"Department:")," ",t.department),e.createElement("h6",null,e.createElement("strong",null,"Status:"),e.createElement(B,{color:t.status==="Pending"?"warning":t.status==="Approved"?"success":t.status==="Rejected"?"danger":t.status==="Completed"?"info":"primary"},t.status)),e.createElement("h6",null,e.createElement("strong",null,"Created By:")," ",((p=t.requestedBy)==null?void 0:p.email)||"Unknown"),e.createElement("h6",null,e.createElement("strong",null,"Procurement Date:")," ",new Date(t.procurementDate).toLocaleDateString()),e.createElement("h6",null,e.createElement("strong",null,"Delivery Date:")," ",new Date(t.deliveryDate).toLocaleDateString()),e.createElement("h6",null,e.createElement("strong",null,"RFQ Required:")," ",t.rfqRequired?"Yes":"No"),((h=t.rfqId)==null?void 0:h._id)&&e.createElement("h6",null,e.createElement("strong",null,"RFQ:")," ",e.createElement("a",{href:`/rfq/${t.rfqId._id}`},t.rfqId.title||"View RFQ")),e.createElement("hr",null),e.createElement("h6",null,e.createElement("strong",null,"Products")),e.createElement(C,{hover:!0,responsive:!0},e.createElement(P,null,e.createElement(c,null,e.createElement(n,null,"Name"),e.createElement(n,null,"Quantity"),e.createElement(n,null,"Unit"),e.createElement(n,null,"Unit Price"))),e.createElement(y,null,((f=t.products)==null?void 0:f.length)>0?t.products.map((l,a)=>{var m;return e.createElement(c,{key:a},e.createElement(r,null,l.name),e.createElement(r,null,l.quantity),e.createElement(r,null,l.unit),e.createElement(r,null,"$",((m=l.unitPrice)==null?void 0:m.toFixed(2))||"N/A"))}):e.createElement(c,null,e.createElement(r,{colSpan:"4"},"No products added yet.")))),e.createElement("hr",null),e.createElement("h6",null,e.createElement("strong",null,"Purchase Orders")),e.createElement(C,{hover:!0,responsive:!0},e.createElement(P,null,e.createElement(c,null,e.createElement(n,null,"PO ID"),e.createElement(n,null,"Status"),e.createElement(n,null,"Amount"),e.createElement(n,null,"Created At"))),e.createElement(y,null,((g=t.purchaseOrders)==null?void 0:g.length)>0?t.purchaseOrders.map((l,a)=>e.createElement(c,{key:a},e.createElement(r,null,l._id),e.createElement(r,null,l.status),e.createElement(r,null,"$",l.amount||"N/A"),e.createElement(r,null,new Date(l.createdAt).toLocaleDateString()))):e.createElement(c,null,e.createElement(r,{colSpan:"4"},"No purchase orders created yet.")))))):e.createElement("div",null,"No Procurement found.")};export{J as default};
