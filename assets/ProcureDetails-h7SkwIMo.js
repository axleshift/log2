import{y as h,i as P,r as a,R as e,C as y}from"./index-C2RBCqsm.js";import{a as D}from"./index-DW_MHI2K.js";import{C as R,a as b}from"./CCardBody-DElEwR_S.js";import{C as v}from"./CCardHeader-q6L0Rfsk.js";import{b as S}from"./CContainer-DysCb-Pj.js";import{C as I}from"./DefaultLayout-DVQ_7BBS.js";import{C as T,a as q,b as u,c,d as B,e as l}from"./CTable-8WMTWEZM.js";import"./index.esm-DkUWHJUO.js";import"./CNavItem-BXq820in.js";import"./CCloseButton-CK9TUEEK.js";import"./cil-user-Ddrdy7PS.js";import"./CForm-CMVnlzCC.js";import"./CFormTextarea-ohoJ3pld.js";import"./CFormControlWrapper-Cc2_n4DS.js";import"./index-Dj3qygHr.js";const N="https://backend-log2.axleshift.com/api/v1/procurement",z=()=>{var d;const{id:o}=h(),f=P(),[t,C]=a.useState(null),[g,s]=a.useState(!0),[i,E]=a.useState(null);return a.useEffect(()=>{(async()=>{var n,p;if(!o){E("Invalid Procurement ID"),s(!1);return}try{s(!0);const m=await D.get(`${N}/${o}`);C(m.data)}catch(m){E(((p=(n=m.response)==null?void 0:n.data)==null?void 0:p.message)||"Failed to load Procurement")}finally{s(!1)}})()},[o]),g?e.createElement(y,{color:"primary"}):i?e.createElement("div",null,i):t?e.createElement(R,null,e.createElement(v,null,e.createElement("h5",null,"Procurement Details"),e.createElement(S,{color:"secondary",onClick:()=>f(-1)},"Back to Procurement List")),e.createElement(b,null,e.createElement("h6",null,e.createElement("strong",null,"Procurement ID:")," ",t._id),e.createElement("h6",null,e.createElement("strong",null,"Title:")," ",t.title),e.createElement("h6",null,e.createElement("strong",null,"Description:")," ",t.description||"No description available"),e.createElement("h6",null,e.createElement("strong",null,"Status:"),e.createElement(I,{color:t.status==="Pending"?"warning":t.status==="Approved"?"success":t.status==="Rejected"?"danger":"primary"},t.status)),e.createElement("h6",null,e.createElement("strong",null,"Created By:")," ",((d=t.createdBy)==null?void 0:d.email)||"Unknown"),e.createElement("h6",null,e.createElement("strong",null,"Procurement Date:")," ",new Date(t.procurementDate).toLocaleDateString()),e.createElement("h6",null,e.createElement("strong",null,"RFQ Required:")," ",t.rfqRequired?"Yes":"No"),t.rfqId&&e.createElement("h6",null,e.createElement("strong",null,"RFQ:")," ",e.createElement("a",{href:`/rfq/${t.rfqId._id}`},t.rfqId.title)),e.createElement("hr",null),e.createElement("h6",null,e.createElement("strong",null,"Purchase Orders")),e.createElement(T,{hover:!0,responsive:!0},e.createElement(q,null,e.createElement(u,null,e.createElement(c,null,"PO ID"),e.createElement(c,null,"Status"),e.createElement(c,null,"Amount"),e.createElement(c,null,"Created At"))),e.createElement(B,null,t.purchaseOrders.length>0?t.purchaseOrders.map((r,n)=>e.createElement(u,{key:n},e.createElement(l,null,r._id),e.createElement(l,null,r.status),e.createElement(l,null,"$",r.amount||"N/A"),e.createElement(l,null,new Date(r.createdAt).toLocaleDateString()))):e.createElement(u,null,e.createElement(l,{colSpan:"4"},"No purchase orders created yet.")))))):e.createElement("div",null,"No Procurement found.")};export{z as default};
