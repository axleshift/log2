import{x as R,r as s,j as e,P as Q,h as F}from"./index-B9rQ-kmE.js";import{a as h}from"./index-DW_MHI2K.js";import{C,a as q}from"./CCardBody-Dywmzwhl.js";import{C as S}from"./CCardHeader-C6ZKMTzh.js";import{b as D}from"./CContainer-DdWdpS7d.js";const x="https://backend-log2.axleshift.com/api/v1/rfq",f=({vendorId:i})=>{const{id:a}=R(),[l,p]=s.useState(null),[d,v]=s.useState(""),[c,j]=s.useState(""),[u,g]=s.useState(""),[m,b]=s.useState(!1);s.useEffect(()=>{if(!a){console.error("RFQ ID is missing.");return}(async()=>{try{console.log("Fetching RFQ with ID:",a);const t=await h.get(`${x}/${a}`);console.log("RFQ Details Response:",t.data),p(t.data),t.data.vendors&&Array.isArray(t.data.vendors)?t.data.vendors.some(o=>o._id===i)&&b(!0):console.error("Vendors field is missing or not an array.")}catch(t){console.error("Error fetching RFQ details:",t)}})()},[a,i]);const y=async r=>{var t,o;if(r.preventDefault(),!m){alert("You are not invited to submit a quote for this RFQ.");return}try{const n=await h.post(`${x}/${a}/submit-quotes`,{vendor:i,price:d,deliveryTime:c,additionalNotes:u});alert(n.data.message)}catch(n){console.error("Error submitting quote:",n),alert(((o=(t=n.response)==null?void 0:t.data)==null?void 0:o.error)||"Error submitting quote.")}};return l?m?e.jsxs("div",{children:[e.jsxs("h3",{children:["Submit a Quote for ",l.title]}),e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{children:[e.jsx("label",{children:"Price:"}),e.jsx("input",{type:"number",value:d,onChange:r=>v(r.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Delivery Time:"}),e.jsx("input",{type:"text",value:c,onChange:r=>j(r.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Additional Notes:"}),e.jsx("textarea",{value:u,onChange:r=>g(r.target.value)})]}),e.jsx("button",{type:"submit",children:"Submit Quote"})]})]}):e.jsx("div",{children:"You are not invited to submit a quote for this RFQ."}):e.jsx("div",{children:"Loading RFQ details..."})};f.propTypes={vendorId:Q.string.isRequired};const N=()=>{const i=F();return e.jsx("div",{children:e.jsxs(C,{children:[e.jsxs(S,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h5",{children:"RFQ Vendors Management"}),e.jsx(D,{color:"primary",onClick:()=>i("/procurement/rfqs"),children:"View RFQs"})]}),e.jsx(q,{children:e.jsx(f,{})})]})})};export{N as default};
