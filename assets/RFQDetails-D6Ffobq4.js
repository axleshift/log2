import{z as k,n as D,r as m,R as e,C as q}from"./index-BuyPBthV.js";import{a as T}from"./index-xsH4HHeE.js";import{C as o,a as u}from"./CCardBody-DIlEFv7M.js";import{C as U}from"./CCardHeader-2ZxsisFQ.js";import{c as L}from"./CRow-DtAWSn5d.js";import{C as P}from"./DefaultLayout-CV3HAylT.js";import{g as x,h as A,j as c,k as a,l as F,m as n}from"./CTable-JDSNWlXE.js";import"./CFormInput-CSoJADs1.js";import"./CFormTextarea-DPO3OWN6.js";import"./CFormSelect-QU3Ik6FC.js";import"./CCloseButton-CxYk9sGR.js";import"./CForm-Dno9JkwL.js";import"./index.esm-DJigi3oJ.js";import"./CAlert-84ht7EJA.js";import"./cil-user-Ddrdy7PS.js";import"./index-LnCWbWn0.js";const H="https://backend-log2.axleshift.com/api/v1/rfq",le=()=>{var h,y,v,R,b;const{id:i}=k(),Q=D(),[t,B]=m.useState(null),[I,p]=m.useState(!0),[N,f]=m.useState(null);m.useEffect(()=>{if(!i){f("Invalid RFQ ID"),p(!1);return}(async()=>{var r,s;try{const{data:d}=await T.get(`${H}/${i}`);B(d.rfq)}catch(d){f(((s=(r=d.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to load RFQ")}finally{p(!1)}})()},[i]);const S=l=>{switch(l){case"Open":return"success";case"Closed":return"danger";default:return"warning"}};if(I)return e.createElement(o,null,e.createElement(u,{className:"text-center"},e.createElement(q,{color:"primary"})));if(N)return e.createElement(o,null,e.createElement(u,{className:"text-center text-danger"},N));if(!t)return e.createElement(o,null,e.createElement(u,{className:"text-center"},"No RFQ found."));const g=t.products||[],C=t.vendors||[],E=t.selectedVendor||null,w=((h=t.requestedBy)==null?void 0:h.email)||((v=(y=t.procurementId)==null?void 0:y.requestedBy)==null?void 0:v.email)||"Unknown";return e.createElement(o,null,e.createElement(U,{className:"d-flex justify-content-between align-items-center"},e.createElement("h5",null,"RFQ Details"),e.createElement(L,{color:"secondary",onClick:()=>Q(-1)},"Back to RFQ List")),e.createElement(u,null,e.createElement("div",{className:"row mb-3"},e.createElement("div",{className:"col-md-6"},e.createElement("strong",null,"RFQ ID:")," ",t._id||"N/A"),e.createElement("div",{className:"col-md-6"},e.createElement("strong",null,"Title:")," ",((R=t.procurementId)==null?void 0:R.title)||"N/A"),e.createElement("div",{className:"col-md-6"},e.createElement("strong",null,"Description:")," ",((b=t.procurementId)==null?void 0:b.description)||"No description"),e.createElement("div",{className:"col-md-6"},e.createElement("strong",null,"Status:")," ",e.createElement(P,{color:S(t.status)},t.status||"Unknown")),e.createElement("div",{className:"col-md-6"},e.createElement("strong",null,"Created By:")," ",w),e.createElement("div",{className:"col-md-6"},e.createElement("strong",null,"Created At:")," ",t.createdAt?new Date(t.createdAt).toLocaleDateString():"N/A")),e.createElement("hr",null),e.createElement("h6",null,e.createElement("strong",null,"Items")),e.createElement(x,{hover:!0,responsive:!0,className:"text-center"},e.createElement(A,null,e.createElement(c,null,e.createElement(a,null,"Name"),e.createElement(a,null,"Quantity"),e.createElement(a,null,"Unit"))),e.createElement(F,null,g.length>0?g.map((l,r)=>e.createElement(c,{key:r},e.createElement(n,null,l.name||"No name"),e.createElement(n,null,l.quantity||"N/A"),e.createElement(n,null,l.unit||"N/A"))):e.createElement(c,null,e.createElement(n,{colSpan:"3"},"No products listed")))),e.createElement("hr",null),e.createElement("h6",null,e.createElement("strong",null,"Invited Vendors")),e.createElement(x,{hover:!0,responsive:!0,className:"text-center"},e.createElement(A,null,e.createElement(c,null,e.createElement(a,null,"Business Name"),e.createElement(a,null,"Contact Person"),e.createElement(a,null,"Phone Number"),e.createElement(a,null,"User Email"))),e.createElement(F,null,C.length>0?C.map((l,r)=>{var s;return e.createElement(c,{key:r},e.createElement(n,null,l.businessName||"N/A"),e.createElement(n,null,l.fullName||"N/A"),e.createElement(n,null,l.contactNumber||"N/A"),e.createElement(n,null,((s=l.userId)==null?void 0:s.email)||"No email"))}):e.createElement(c,null,e.createElement(n,{colSpan:"4"},"No vendors added yet")))),e.createElement("hr",null),e.createElement("h6",null,e.createElement("strong",null,"Selected Vendor:")," ",(E==null?void 0:E.businessName)||e.createElement("span",{className:"text-muted"},"No vendor selected yet"))))};export{le as default};
