import{u as g,r as d,R as t,C as b,L as y}from"./index-4l8YDPMt.js";import{a as R}from"./index-t--hEgTQ.js";import{C as w,a as F}from"./CCardBody-DYN-5Bvl.js";import{C as T}from"./CCardHeader-CF_x8B1s.js";import{C as f}from"./CAlert-D1awv8uF.js";import{b as x,c as N,d as C,e as o,f as v,g as u}from"./CTable-BFf1LR0p.js";import"./CCloseButton-CN5zlj3N.js";import"./CRow-Dstcvhhn.js";const A="https://backend-log2.axleshift.com",r=R.create({baseURL:A,withCredentials:!0});r.interceptors.request.use(e=>(e.data instanceof FormData?e.headers["Content-Type"]="multipart/form-data":e.headers["Content-Type"]="application/json",e),e=>Promise.reject(e));r.interceptors.response.use(e=>e,async e=>{var a,s,c;if(console.error("API Error:",((s=(a=e.response)==null?void 0:a.data)==null?void 0:s.message)||e.message),((c=e.response)==null?void 0:c.status)===401)try{return await r.post("/auth/refresh-token"),r(e.config)}catch{console.error("Session expired, redirecting to login..."),window.location.href="/login"}return Promise.reject(e)});const D={get:(e,a,s={})=>r.get(e,{params:a,headers:s}),post:(e,a)=>r.post(e,a),put:(e,a)=>r.put(e,a),delete:e=>r.delete(e)},H=()=>{const{accessToken:e}=g(),[a,s]=d.useState([]),[c,p]=d.useState(!0),[E,h]=d.useState(null);return d.useEffect(()=>{e&&(async()=>{var i,l;try{const m=await D.get("/api/v1/rfq/vendor/rfqs",null,{Authorization:`Bearer ${e}`});s(m.data)}catch(m){console.error("Failed to fetch RFQs:",m),h(((l=(i=m.response)==null?void 0:i.data)==null?void 0:l.message)||"Failed to load RFQs.")}finally{p(!1)}})()},[e]),t.createElement(w,{className:"shadow-sm"},t.createElement(T,{className:"bg-primary text-white fw-bold"},"Your RFQs"),t.createElement(F,null,c?t.createElement("div",{className:"text-center my-3"},t.createElement(b,{color:"primary"})):E?t.createElement(f,{color:"danger",className:"text-center"},E):a.length===0?t.createElement(f,{color:"warning",className:"text-center"},"No RFQs available."):t.createElement(x,{striped:!0,hover:!0,responsive:!0},t.createElement(N,{color:"light"},t.createElement(C,null,t.createElement(o,null,"#"),t.createElement(o,null,"Title"),t.createElement(o,null,"Due Date"),t.createElement(o,null,"Action"))),t.createElement(v,null,a.map((n,i)=>{var l;return t.createElement(C,{key:n._id},t.createElement(o,null,i+1),t.createElement(u,null,((l=n.procurementId)==null?void 0:l.title)||"N/A"),t.createElement(u,null,n.deadline?new Date(n.deadline).toLocaleDateString():"N/A"),t.createElement(u,null,t.createElement(y,{to:`/vendor/rfqs/${n._id}`,className:"btn btn-sm btn-primary"},"View Details")))})))))};export{H as default};
